var BigPipe=function(){function ajax(e,t,a){var n=new(window.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP");n.onreadystatechange=function(){4==this.readyState&&t(this.responseText)},n.open(a?"POST":"GET",e+"&t="+~~(1e6*Math.random()),!0),a&&n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.send(a)}function renderPagelet(e,t,a){if(!(e.id in a)){a[e.id]=!0,e.parent_id&&renderPagelet(t[e.parent_id],t,a);var n=document.getElementById(e.id),r=idMaps[e.id];r&&r.html_id&&(n=document.getElementById(r.html_id)),n||(n=document.createElement("div"),n.id=e.id,document.body.appendChild(n)),n.innerHTML=e.html;for(var i=n.getElementsByTagName("script"),o=i.length-1;o>=0;o--)node=i[o],text=node.text||node.textContent||node.innerHTML||"",window.eval.call(window,text)}}function render(e){var t,a=e.length,n={},r={};for(t=0;a>t;t++){var i=e[t];n[i.id]=i}for(t=0;a>t;t++)renderPagelet(e[t],n,r)}function process(e){function t(){if(a.style){var t=document.createElement("style");t.innerHTML=a.style,document.getElementsByTagName("head")[0].appendChild(t)}render(e.pagelets),a.js?LazyLoad.js(a.js,function(){a.script&&window.eval(a.script)}):a.script&&window.eval(a.script)}var a=e.resource_map;a.async&&require.resourceMap(a.async),a.css?LazyLoad.css(a.css,t):t()}function asyncLoad(arg,param,cb){arg instanceof Array||(arg=[arg]);for(var obj,arr=[],i=arg.length-1;i>=0;i--){if(obj=arg[i],!obj.id)throw new Error("missing pagelet id");idMaps[obj.id]=obj,arr.push("pagelets[]="+obj.id)}var url=location.href.split("#")[0].indexOf("mobile/webapp/taxi/index")>-1?location.href.split("#")[0]+"&"+arr.join("&")+"&force_mode=1"+"&"+param:location.href.split("#")[0]+"mobile/webapp/taxi/index"+"&"+arr.join("&")+"&force_mode=1"+"&"+param;ajax(url,function(res){var data=window.JSON?JSON.parse(res):eval("("+res+")");cb&&"[object Function]"===Object.prototype.toString.call(cb)&&cb(),process(data)})}var idMaps={};return{asyncLoad:asyncLoad}}();