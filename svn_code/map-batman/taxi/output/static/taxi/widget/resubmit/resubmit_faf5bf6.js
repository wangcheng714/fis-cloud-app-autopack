define("taxi:widget/resubmit/resubmit.js",function(e,i,t){"use strict";var o=e("common:static/js/util.js"),n=e("common:widget/popup/popup.js"),a=e("common:widget/stat/stat.js"),r=e("common:widget/cookie/cookie.js"),s=e("taxi:widget/common/addprice/addprice.js"),d=e("taxi:widget/common/radar/radar.js"),i={create:function(){var e,i=$(".taxi-widget-resubmit"),t=i.find(".btn-resubmit"),o=i.find(".btn-back"),n=i.find("form"),a=i.find(".addprice-wrapper"),r=this.options;r.price_list?(e=r.price_list.split(","),s.init(e),i.find("[type=input][name=add_price]").remove()):a.hide(),i.find("[name=city_code]").val(r.city_code),i.find("[name=order_id]").val(r.order_id),t.on("click",$.proxy(this.onBtnResubmitClick,this)),o.on("click",$.proxy(this.onBtnBackClick,this)),this.$el=i,this.$form=n},onBtnResubmitClick:function(){var e=$.extend({price_list:this.options.price_list,taxi_num:this.options.taxi_num},o.urlToJSON(this.$form.serialize()));n.open({text:"正在提交表单...",layer:!0,autoCloseTime:0}),LoadManager.request({data:$.extend({},e,{qt:"addpricereq"}),success:function(i){r.set("BAIDU_TAXI_ORDER_ID",i.info.order_id,{expires:162e6}),r.set("BAIDU_TAXI_ORDER_START_TIME",Date.now()),LoadManager.loadPage("waiting",$.extend({},e,i.info)),a.addStat(STAT_CODE.TAXI_ADDPRICEREQ)},error:function(e){var i="";switch(e.errno){case-304:i="订单已过期或结束！";break;case-113:i="请求过于频繁，请稍后再试！";break;default:i="系统错误！"}n.open({text:i,layer:!0,onClose:function(){r.remove("BAIDU_TAXI_ORDER_ID"),LoadManager.loadPage("home")}})}})},onBtnBackClick:function(){r.remove("BAIDU_TAXI_ORDER_ID")},destroy:function(){d.destroy()},init:function(){var e=this.options=LoadManager.getPageOptions(),i=r.get("BAIDU_TAXI_ORDER_ID");e&&i||LoadManager.loadPage("home"),this.create()}};t.exports=i});