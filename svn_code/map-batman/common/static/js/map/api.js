define('common:static/js/map/api.js',function(require,exports,module){(function(){var W,aF=W=aF||{version:"1.3.4"};aF.guid="$BAIDU$";window[aF.guid]=window[aF.guid]||{};aF.object=aF.object||{};aF.extend=aF.object.extend=function(aS,T){for(var aR in T){if(T.hasOwnProperty(aR)){aS[aR]=T[aR]}}return aS};aF.dom=aF.dom||{};aF.dom.g=function(T){if("string"==typeof T||T instanceof String){return document.getElementById(T)}else{if(T&&T.nodeName&&(T.nodeType==1||T.nodeType==9)){return T}}return null};aF.g=aF.G=aF.dom.g;aF.dom.hide=function(T){T=aF.dom.g(T);T.style.display="none";return T};aF.hide=aF.dom.hide;aF.lang=aF.lang||{};aF.lang.isString=function(T){return"[object String]"==Object.prototype.toString.call(T)};aF.isString=aF.lang.isString;aF.dom._g=function(T){if(aF.lang.isString(T)){return document.getElementById(T)}return T};aF._g=aF.dom._g;aF.dom.contains=function(T,aR){var aS=aF.dom._g;T=aS(T);aR=aS(aR);return T.contains?T!=aR&&T.contains(aR):!!(T.compareDocumentPosition(aR)&16)};aF.browser=aF.browser||{};aF.dom._NAME_ATTRS=(function(){var T={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",usemap:"useMap",frameborder:"frameBorder"};T.htmlFor="for";T.className="class";return T})();aF.dom.setAttr=function(aR,T,aS){aR=aF.dom.g(aR);if("style"==T){aR.style.cssText=aS}else{T=aF.dom._NAME_ATTRS[T]||T;aR.setAttribute(T,aS)}return aR};aF.setAttr=aF.dom.setAttr;aF.dom.setAttrs=function(aS,T){aS=aF.dom.g(aS);for(var aR in T){aF.dom.setAttr(aS,aR,T[aR])}return aS};aF.setAttrs=aF.dom.setAttrs;aF.string=aF.string||{};aF.dom.removeClass=function(aV,aW){aV=aF.dom.g(aV);var aT=aV.className.split(/\s+/),aX=aW.split(/\s+/),aR,T=aX.length,aS,aU=0;for(;aU<T;++aU){for(aS=0,aR=aT.length;aS<aR;++aS){if(aT[aS]==aX[aU]){aT.splice(aS,1);break}}}aV.className=aT.join(" ");return aV};aF.removeClass=aF.dom.removeClass;aF.dom.insertHTML=function(aT,T,aS){aT=aF.dom.g(aT);var aR,aU;if(aT.insertAdjacentHTML){aT.insertAdjacentHTML(T,aS)}else{aR=aT.ownerDocument.createRange();T=T.toUpperCase();if(T=="AFTERBEGIN"||T=="BEFOREEND"){aR.selectNodeContents(aT);aR.collapse(T=="AFTERBEGIN")}else{aU=T=="BEFOREBEGIN";aR[aU?"setStartBefore":"setEndAfter"](aT);aR.collapse(aU)}aR.insertNode(aR.createContextualFragment(aS))}return aT};aF.insertHTML=aF.dom.insertHTML;aF.dom.show=function(T){T=aF.dom.g(T);T.style.display="";return T};aF.show=aF.dom.show;aF.dom.getDocument=function(T){T=aF.dom.g(T);return T.nodeType==9?T:T.ownerDocument||T.document};aF.dom.addClass=function(aV,aW){aV=aF.dom.g(aV);var aR=aW.split(/\s+/),T=aV.className,aU=" "+T+" ",aT=0,aS=aR.length;for(;aT<aS;aT++){if(aU.indexOf(" "+aR[aT]+" ")<0){T+=" "+aR[aT]}}aV.className=T;return aV};aF.addClass=aF.dom.addClass;aF.dom._styleFixer=aF.dom._styleFixer||{};aF.dom._styleFilter=aF.dom._styleFilter||[];aF.dom._styleFilter.filter=function(aR,aU,aV){for(var T=0,aT=aF.dom._styleFilter,aS;aS=aT[T];T++){if(aS=aS[aV]){aU=aS(aR,aU)}}return aU};aF.string.toCamelCase=function(T){if(T.indexOf("-")<0&&T.indexOf("_")<0){return T}return T.replace(/[-_][^-_]/g,function(aR){return aR.charAt(1).toUpperCase()})};aF.dom.getStyle=function(aS,aR){var aV=aF.dom;aS=aV.g(aS);aR=aF.string.toCamelCase(aR);var aU=aS.style[aR];if(!aU){var T=aV._styleFixer[aR],aT=aS.currentStyle||getComputedStyle(aS,null);aU=T&&T.get?T.get(aS,aT):aT[T||aR]}if(T=aV._styleFilter){aU=T.filter(aR,aU,"get")}return aU};aF.getStyle=aF.dom.getStyle;if(/opera\/(\d+\.\d)/i.test(navigator.userAgent)){aF.browser.opera=+RegExp["\x241"]}aF.browser.isWebkit=/webkit/i.test(navigator.userAgent);aF.browser.isGecko=/gecko/i.test(navigator.userAgent)&&!/like gecko/i.test(navigator.userAgent);aF.browser.isStrict=document.compatMode=="CSS1Compat";aF.dom.getPosition=function(T){T=aF.dom.g(T);var aZ=aF.dom.getDocument(T),aT=aF.browser,aW=aF.dom.getStyle,aS=aT.isGecko>0&&aZ.getBoxObjectFor&&aW(T,"position")=="absolute"&&(T.style.top===""||T.style.left===""),aX={left:0,top:0},aV=(aT.ie&&!aT.isStrict)?aZ.body:aZ.documentElement,a0,aR;if(T==aV){return aX}if(T.getBoundingClientRect){aR=T.getBoundingClientRect();aX.left=Math.floor(aR.left)+Math.max(aZ.documentElement.scrollLeft,aZ.body.scrollLeft);aX.top=Math.floor(aR.top)+Math.max(aZ.documentElement.scrollTop,aZ.body.scrollTop);aX.left-=aZ.documentElement.clientLeft;aX.top-=aZ.documentElement.clientTop;var aY=aZ.body,a1=parseInt(aW(aY,"borderLeftWidth")),aU=parseInt(aW(aY,"borderTopWidth"));if(aT.ie&&!aT.isStrict){aX.left-=isNaN(a1)?2:a1;aX.top-=isNaN(aU)?2:aU}}else{a0=T;do{aX.left+=a0.offsetLeft;aX.top+=a0.offsetTop;if(aT.isWebkit>0&&aW(a0,"position")=="fixed"){aX.left+=aZ.body.scrollLeft;aX.top+=aZ.body.scrollTop;break}a0=a0.offsetParent}while(a0&&a0!=T);if(aT.opera>0||(aT.isWebkit>0&&aW(T,"position")=="absolute")){aX.top-=aZ.body.offsetTop}a0=T.offsetParent;while(a0&&a0!=aZ.body){aX.left-=a0.scrollLeft;if(!aT.opera||a0.tagName!="TR"){aX.top-=a0.scrollTop}a0=a0.offsetParent}}return aX};if(/firefox\/(\d+\.\d)/i.test(navigator.userAgent)){aF.browser.firefox=+RegExp["\x241"]}(function(){var T=navigator.userAgent;if(/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(T)&&!/chrome/i.test(T)){aF.browser.safari=+(RegExp["\x241"]||RegExp["\x242"])}})();if(/chrome\/(\d+\.\d)/i.test(navigator.userAgent)){aF.browser.chrome=+RegExp["\x241"]}aF.array=aF.array||{};aF.array.each=function(aV,aT){var aS,aU,aR,T=aV.length;if("function"==typeof aT){for(aR=0;aR<T;aR++){aU=aV[aR];aS=aT.call(aV,aU,aR);if(aS===false){break}}}return aV};aF.each=aF.array.each;aF.lang.guid=function(){return"TANGRAM__"+(window[aF.guid]._counter++).toString(36)};window[aF.guid]._counter=window[aF.guid]._counter||1;window[aF.guid]._instances=window[aF.guid]._instances||{};aF.lang.isFunction=function(T){return"[object Function]"==Object.prototype.toString.call(T)};aF.lang.Class=function(T){this.guid=T||aF.lang.guid();window[aF.guid]._instances[this.guid]=this};window[aF.guid]._instances=window[aF.guid]._instances||{};aF.lang.Class.prototype.dispose=function(){delete window[aF.guid]._instances[this.guid];for(var T in this){if(!aF.lang.isFunction(this[T])){delete this[T]}}this.disposed=true};aF.lang.Class.prototype.toString=function(){return"[object "+(this._className||"Object")+"]"};aF.lang.Event=function(T,aR){this.type=T;this.returnValue=true;this.target=aR||null;this.currentTarget=null};aF.lang.Class.prototype.addEventListener=function(aT,aS,aR){if(!aF.lang.isFunction(aS)){return}!this.__listeners&&(this.__listeners={});var T=this.__listeners,aU;if(typeof aR=="string"&&aR){if(/[^\w\-]/.test(aR)){throw ("nonstandard key:"+aR)}else{aS.hashCode=aR;aU=aR}}aT.indexOf("on")!=0&&(aT="on"+aT);typeof T[aT]!="object"&&(T[aT]={});aU=aU||aF.lang.guid();aS.hashCode=aU;T[aT][aU]=aS};aF.lang.Class.prototype.removeEventListener=function(aS,aR){if(aF.lang.isFunction(aR)){aR=aR.hashCode}else{if(!aF.lang.isString(aR)){return}}!this.__listeners&&(this.__listeners={});aS.indexOf("on")!=0&&(aS="on"+aS);var T=this.__listeners;if(!T[aS]){return}T[aS][aR]&&delete T[aS][aR]};aF.lang.Class.prototype.dispatchEvent=function(aT,T){if(aF.lang.isString(aT)){aT=new aF.lang.Event(aT)}!this.__listeners&&(this.__listeners={});T=T||{};for(var aS in T){aT[aS]=T[aS]}var aS,aR=this.__listeners,aU=aT.type;aT.target=aT.target||this;aT.currentTarget=this;aU.indexOf("on")!=0&&(aU="on"+aU);aF.lang.isFunction(this[aU])&&this[aU].apply(this,arguments);if(typeof aR[aU]=="object"){for(aS in aR[aU]){aR[aU][aS].apply(this,arguments)}}return aT.returnValue};aF.lang.inherits=function(aW,aU,aT){var aS,aV,T=aW.prototype,aR=new Function();aR.prototype=aU.prototype;aV=aW.prototype=new aR();for(aS in T){aV[aS]=T[aS]}aW.prototype.constructor=aW;aW.superClass=aU.prototype;if("string"==typeof aT){aV._className=aT}};aF.inherits=aF.lang.inherits;aF.lang.instance=function(T){return window[aF.guid]._instances[T]||null};aF.platform=aF.platform||{};aF.platform.isAndroid=/android/i.test(navigator.userAgent);if(/android (\d+\.\d)/i.test(navigator.userAgent)){aF.platform.android=aF.android=RegExp["\x241"]}aF.platform.isIpad=/ipad/i.test(navigator.userAgent);aF.platform.isIphone=/iphone/i.test(navigator.userAgent);aF.platform.iosVersion=/iphone os (\d)\_/i.test(navigator.userAgent)?+RegExp["\x241"]:0;aF.lang.Event.prototype.inherit=function(aS){var aR=this;this.domEvent=aS=window.event||aS;aR.clientX=aS.clientX||aS.pageX;aR.clientY=aS.clientY||aS.pageY;aR.offsetX=aS.offsetX||aS.layerX;aR.offsetY=aS.offsetY||aS.layerY;aR.screenX=aS.screenX;aR.screenY=aS.screenY;aR.ctrlKey=aS.ctrlKey||aS.metaKey;aR.shiftKey=aS.shiftKey;aR.altKey=aS.altKey;if(aS.touches){aR.touches=[];for(var T=0;T<aS.touches.length;T++){aR.touches.push({clientX:aS.touches[T].clientX,clientY:aS.touches[T].clientY,screenX:aS.touches[T].screenX,screenY:aS.touches[T].screenY,pageX:aS.touches[T].pageX,pageY:aS.touches[T].pageY,target:aS.touches[T].target,identifier:aS.touches[T].identifier})}}if(aS.changedTouches){aR.changedTouches=[];for(var T=0;T<aS.changedTouches.length;T++){aR.changedTouches.push({clientX:aS.changedTouches[T].clientX,clientY:aS.changedTouches[T].clientY,screenX:aS.changedTouches[T].screenX,screenY:aS.changedTouches[T].screenY,pageX:aS.changedTouches[T].pageX,pageY:aS.changedTouches[T].pageY,target:aS.changedTouches[T].target,identifier:aS.changedTouches[T].identifier})}}if(aS.targetTouches){aR.targetTouches=[];for(var T=0;T<aS.targetTouches.length;T++){aR.targetTouches.push({clientX:aS.targetTouches[T].clientX,clientY:aS.targetTouches[T].clientY,screenX:aS.targetTouches[T].screenX,screenY:aS.targetTouches[T].screenY,pageX:aS.targetTouches[T].pageX,pageY:aS.targetTouches[T].pageY,target:aS.targetTouches[T].target,identifier:aS.targetTouches[T].identifier})}}aR.rotation=aS.rotation;aR.scale=aS.scale;return aR};aF.lang.decontrol=function(aR){var T=window[aF.guid];T._instances&&(delete T._instances[aR])};aF.event={};aF.on=aF.event.on=function(aS,aR,T){if(!(aS=aF.g(aS))){return aS}aR=aR.replace(/^on/,"");if(aS.addEventListener){aS.addEventListener(aR,T,false)}else{if(aS.attachEvent){aS.attachEvent("on"+aR,T)}}return aS};aF.un=aF.event.un=function(aS,aR,T){if(!(aS=aF.g(aS))){return aS}aR=aR.replace(/^on/,"");if(aS.removeEventListener){aS.removeEventListener(aR,T,false)}else{if(aS.detachEvent){aS.detachEvent("on"+aR,T)}}return aS};aF.dom.hasClass=function(aS,aR){if(!aS||!aS.className||typeof aS.className!="string"){return false}var T=-1;try{T=aS.className==aR||aS.className.indexOf(aR)}catch(aT){return false}return T>-1};window.BMap=window.BMap||{};window.BMap._register=[];window.BMap.register=function(T){this._register.push(T)};BMap._streetViewRegister=[];BMap.streetViewRegister=function(T){this._streetViewRegister.push(T)};function x(aV,T){aV=aF.g(aV);if(!aV){return}var aY=this;aF.lang.Class.call(aY);aY.config={clickInterval:200,enableDragging:true,enableDblclickZoom:true,enableMouseDown:true,enablePinchToZoom:true,enableAutoResize:true,fps:25,zoomerDuration:240,actionDuration:450,minZoom:1,maxZoom:18,mapType:new aK("\u5730\u56fe",aA,{tips:"\u663e\u793a\u666e\u901a\u5730\u56fe",mapInstance:this}),enableInertialDragging:false,drawMargin:100,enableHighResolution:false,devicePixelRatio:window.devicePixelRatio||2,vectorMapLevel:12,beautifyBlackList:["chrome"]};aF.extend(aY.config,T||{});var aX=aY.config.beautifyBlackList;for(var aW=0,aU=aX.length;aW<aU;aW++){if(aF.browser[aX[aW]]){aY.config.devicePixelRatio=1;break}}aY.container=aV;aY._setStyle(aV);aV.unselectable="on";aV.innerHTML="";aV.appendChild(aY.render());var aR=aY.getSize();aY.width=aR.width;aY.height=aR.height;aY.offsetX=0;aY.offsetY=0;aY.platform=aV.firstChild;aY.maskLayer=aY.platform.firstChild;aY.maskLayer.style.width=aY.width+"px";aY.maskLayer.style.height=aY.height+"px";aY._panes={};aY.centerPoint=new f(0,0);aY.mercatorCenter=new f(0,0);aY.zoomLevel=1;aY.lastLevel=0;aY.defaultZoomLevel=null;aY.defaultCenter=null;aY.currentCity="";aY.cityCode="";aY._hotspots={};aY.currentOperation=0;T=T||{};var aT=aY.mapType=aY.config.mapType;aY.projection=aT.getProjection();var aS=aY.config;aS.userMinZoom=T.minZoom;aS.userMaxZoom=T.maxZoom;aY._checkZoom();aY.temp={operating:false,arrow:0,lastDomMoveTime:0,lastLoadTileTime:0,lastMovingTime:0,canKeyboard:false,registerIndex:-1,curSpots:[]};for(var aW=0;aW<BMap._register.length;aW++){BMap._register[aW](aY)}aY.temp.registerIndex=aW;aY._bind();ao.load("map",function(){aY._draw()});ao.load("opmb",function(){aY._asyncRegister()});aV=null;aY.enableLoadTiles=true;aY._viewTiles=[]}aF.lang.inherits(x,aF.lang.Class,"Map");aF.extend(x.prototype,{render:function(){var T=p("div");var aT=T.style;aT.overflow="visible";aT.position="absolute";aT.zIndex="0";aT.top=aT.left="0px";var aR=p("div",{"class":"BMap_mask"});var aS=aR.style;aS.position="absolute";aS.top=aS.left="0px";aS.zIndex="9";aS.overflow="hidden";aS.WebkitUserSelect="none";T.appendChild(aR);return T},_setStyle:function(aR){var T=aR.style;T.overflow="hidden";if(al(aR).position!="absolute"){T.position="relative";T.zIndex=0}T.backgroundColor="#F5F3F0";T.color="#000";T.textAlign="left"},_bind:function(){var T=this;T._watchSize=function(){var aR=T.getSize();if(T.width!=aR.width||T.height!=aR.height){var aT=new U(T.width,T.height);var aU=new av("onbeforeresize");aU.size=aT;T.dispatchEvent(aU);T._updateCenterPoint((aR.width-T.width)/2,(aR.height-T.height)/2);T.maskLayer.style.width=(T.width=aR.width)+"px";T.maskLayer.style.height=(T.height=aR.height)+"px";var aS=new av("onresize");aS.size=aR;T.dispatchEvent(aS)}};if(T.config.enableAutoResize){T.temp.autoResizeTimer=setInterval(T._watchSize,80)}},_updateCenterPoint:function(aV,aW,aU,aT){var aS=this.getMapType().getZoomUnits(this.getZoom());var aR=true;if(aU){this.centerPoint=new f(aU.lng,aU.lat);aR=false}var T=(aU&&aT)?aU:this.mercatorCenter;if(T){this.mercatorCenter=new f(T.lng+aV*aS,T.lat-aW*aS);if(this.mercatorCenter&&aR){this.centerPoint=this.mercatorCenter}}},zoomTo:function(aT,aR){if(!I(aT)){return}aT=this._getProperZoom(aT).zoom;if(aT==this.zoomLevel){return}this.lastLevel=this.zoomLevel;this.zoomLevel=aT;var aS;if(aR){aS=aR}if(aS){var T=this.pointToPixel(aS,this.lastLevel);this._updateCenterPoint(this.width/2-T.x,this.height/2-T.y,this.pixelToPoint(T,this.lastLevel),true)}this.dispatchEvent(new av("onzoomstart"));this.dispatchEvent(new av("onzoomstartcode"))},setZoom:function(T){this.zoomTo(T)},zoomIn:function(T){if(this.zoomLevel>=this.config.vectorMapLevel&&this.zoomLevel<=18){BMap.logCountError.countTouch(0,1)}this.zoomTo(this.zoomLevel+1,T)},zoomOut:function(T){if(this.zoomLevel>=this.config.vectorMapLevel&&this.zoomLevel<=18){BMap.logCountError.countTouch(0,1)}this.zoomTo(this.zoomLevel-1,T)},panTo:function(T,aR){if(!(T instanceof f)){return}this.mercatorCenter=T;if(T){this.centerPoint=new f(T.lng,T.lat)}else{this.centerPoint=this.mercatorCenter}},panBy:function(aR,T){aR=Math.round(aR)||0;T=Math.round(T)||0;this._updateCenterPoint(-aR,-T)},addControl:function(T){if(T&&au(T._i)){T._i(this);this.dispatchEvent(new av("onaddcontrol",T))}},removeControl:function(T){if(T&&au(T.remove)){T.remove();this.dispatchEvent(new av("onremovecontrol",T))}},addOverlay:function(T){if(T&&au(T._i)){T._i(this);this.dispatchEvent(new av("onaddoverlay",T))}},removeOverlay:function(T){if(T&&au(T.remove)){T.remove();this.dispatchEvent(new av("onremoveoverlay",T))}},clearOverlays:function(){this.dispatchEvent(new av("onclearoverlays"))},addTileLayer:function(T){if(T){this.dispatchEvent(new av("onaddtilelayer",T))}},removeTileLayer:function(T){if(T){this.dispatchEvent(new av("onremovetilelayer",T))}},setCenter:function(T){var aR=this;if(T instanceof f){aR.panTo(T,{noAnimation:true})}},centerAndZoom:function(T,aS,aU){var aR=this;if(!(T instanceof f)||!aS){return}aS=aR._getProperZoom(aS).zoom;aR.lastLevel=aR.zoomLevel||aS;aR.zoomLevel=aS;aR.centerPoint=new f(T.lng,T.lat);aR.mercatorCenter=aR.centerPoint;aR.defaultZoomLevel=aR.defaultZoomLevel||aR.zoomLevel;aR.defaultCenter=aR.defaultCenter||aR.centerPoint;var aV=new av("onload");var aT=new av("onloadcode");aV.point=new f(T.lng,T.lat);aV.pixel=aR.pointToPixel(aR.centerPoint,aR.zoomLevel);aV.zoom=aS;if(!aR.loaded){aR.loaded=true;aR.dispatchEvent(aV)}aR.dispatchEvent(aT);if(aU){aR.dispatchEvent(new av("onmoveend"))}else{aR.dispatchEvent(new av("onmoveend"));if(aR.lastLevel!=aR.zoomLevel){aR.dispatchEvent(new av("onzoomend"))}}},reset:function(){this.centerAndZoom(this.defaultCenter,this.defaultZoomLevel,true)},enableDragging:function(){this.config.enableDragging=true},disableDragging:function(){this.config.enableDragging=false},enableInertialDragging:function(){this.config.enableInertialDragging=true},disableInertialDragging:function(){this.config.enableInertialDragging=false},enableDoubleClickZoom:function(){this.config.enableDblclickZoom=true},disableDoubleClickZoom:function(){this.config.enableDblclickZoom=false},enablePinchToZoom:function(){this.config.enablePinchToZoom=true},disablePinchToZoom:function(){this.config.enablePinchToZoom=false},enableAutoResize:function(){this.config.enableAutoResize=true;this._watchSize();if(!this.temp.autoResizeTimer){this.temp.autoResizeTimer=setInterval(this._watchSize,80)}},disableAutoResize:function(){this.config.enableAutoResize=false;if(this.temp.autoResizeTimer){clearInterval(this.temp.autoResizeTimer);this.temp.autoResizeTimer=null}},getSize:function(){return new U(this.container.clientWidth,this.container.clientHeight)},getCenter:function(){return this.centerPoint},getZoom:function(){return this.zoomLevel},checkResize:function(){this._watchSize()},_getProperZoom:function(aS){var aR=this.config.minZoom,T=this.config.maxZoom,aT=false;if(aS<aR){aT=true;aS=aR}if(aS>T){aT=true;aS=T}return{zoom:aS,exceeded:aT}},getContainer:function(){return this.container},pointToPixel:function(T,aR){aR=aR||this.getZoom();return this.projection.pointToPixel(T,aR,this.mercatorCenter,this.getSize(),this.currentCity)},pixelToPoint:function(T,aR){aR=aR||this.getZoom();return this.projection.pixelToPoint(T,aR,this.mercatorCenter,this.getSize(),this.currentCity)},pointToOverlayPixel:function(T,aS){if(!T){return}var aT=new f(T.lng,T.lat);var aR=this.pointToPixel(aT,aS);aR.x-=this.offsetX;aR.y-=this.offsetY;return aR},overlayPixelToPoint:function(T,aS){if(!T){return}var aR=new aM(T.x,T.y);aR.x+=this.offsetX;aR.y+=this.offsetY;return this.pixelToPoint(aR,aS)},getBounds:function(){if(!this.isLoaded()){return new s()}var aU=this.getSize();this.width=aU.width;this.height=aU.height;var aR=arguments[0]||{},aT=aR.margins||[0,0,0,0],T=aR.zoom||null,aV=this.pixelToPoint({x:aT[3],y:this.height-aT[2]},T),aS=this.pixelToPoint({x:this.width-aT[1],y:aT[0]},T);return new s(aV,aS)},isLoaded:function(){return !!this.loaded},_getBestLevel:function(aR,aS){var aV=this.getMapType();var aX=aS.margins||[10,10,10,10],aU=aS.zoomFactor||0,aY=aX[1]+aX[3],aW=aX[0]+aX[2],T=aV.getMinZoom(),a0=aV.getMaxZoom();for(var aT=a0;aT>=T;aT--){var aZ=this.getMapType().getZoomUnits(aT);if(aR.toSpan().lng/aZ<this.width-aY&&aR.toSpan().lat/aZ<this.height-aW){break}}aT+=aU;if(aT<T){aT=T}if(aT>a0){aT=a0}return aT},getViewport:function(aZ,aR){var a3={center:this.getCenter(),zoom:this.getZoom()};if(!aZ||!aZ instanceof s&&aZ.length==0||aZ instanceof s&&aZ.isEmpty()){return a3}var a1=[];if(aZ instanceof s){a1.push(aZ.getNorthEast());a1.push(aZ.getSouthWest())}else{a1=aZ.slice(0)}aR=aR||{};var aV=[];for(var aW=0,aU=a1.length;aW<aU;aW++){aV.push(a1[aW])}var aS=new s();for(var aW=aV.length-1;aW>=0;aW--){aS.extend(aV[aW])}if(aS.isEmpty()){return a3}var T=aS.getCenter();var a2=this._getBestLevel(aS,aR);if(aR.margins){var aY=aR.margins,aX=(aY[1]-aY[3])/2,a0=(aY[0]-aY[2])/2,aT=this.getMapType().getZoomUnits(a2);T.lng=T.lng+aT*aX;T.lat=T.lat+aT*a0}return{center:T,zoom:a2}},setViewport:function(aR,aU){var T;if(aR&&aR.center){T=aR}else{T=this.getViewport(aR,aU)}aU=aU||{};var aS=aU.delay||200;if(T.zoom==this.zoomLevel&&aU.enableAnimation!=false){var aT=this;setTimeout(function(){aT.panTo(T.center,{duration:210})},aS)}else{this.centerAndZoom(T.center,T.zoom)}},getPanes:function(){return this._panes},getOverlays:function(){var aT=[],aU=this._overlays,aS=this._customOverlays;if(aU){for(var aR in aU){if(aU[aR] instanceof aC){aT.push(aU[aR])}}}if(aS){for(var aR=0,T=aS.length;aR<T;aR++){aT.push(aS[aR])}}return aT},getMapType:function(){return this.mapType},_asyncRegister:function(){for(var T=this.temp.registerIndex;T<BMap._register.length;T++){BMap._register[T](this)}this.temp.registerIndex=T},highResolutionEnabled:function(){return this.config.enableHighResolution&&window.devicePixelRatio>1},enableHighResolution:function(){this.config.enableHighResolution=true},disableHighResolution:function(){this.config.enableHighResolution=false},addHotspot:function(aR){if(aR instanceof J){this._hotspots[aR.guid]=aR;aR.initialize(this)}var T=this;ao.load("hotspot",function(){T._asyncRegister()})},removeHotspot:function(T){if(this._hotspots[T.guid]){delete this._hotspots[T.guid]}},clearHotspots:function(){this._hotspots={}},_checkZoom:function(){var aR=this.mapType.getMinZoom();var aS=this.mapType.getMaxZoom();var T=this.config;T.minZoom=T.userMinZoom||aR;T.maxZoom=T.userMaxZoom||aS;if(T.minZoom<aR){T.minZoom=aR}if(T.maxZoom>aS){T.maxZoom=aS}},setMinZoom:function(T){if(T>this.config.maxZoom){T=this.config.maxZoom}this.config.userMinZoom=T;this._updateZoom()},setMaxZoom:function(T){if(T<this.config.minZoom){T=this.config.minZoom}this.config.userMaxZoom=T;this._updateZoom()},_updateZoom:function(){this._checkZoom();var T=this.config;if(this.zoomLevel<T.minZoom){this.setZoom(T.minZoom)}else{if(this.zoomLevel>T.maxZoom){this.setZoom(T.maxZoom)}}var aR=new av("onzoomspanchange");aR.minZoom=T.minZoom;aR.maxZoom=T.maxZoom;this.dispatchEvent(aR)},getViewTiles:function(){return this._viewTiles}});window.BMAP_CANVAS_DRAWER=3;(function(){window.asyncMdlVer={control:"bbc4f5",hotspot:"0a23zr",map:"vva4yc",marker:"izcrfp",opmb:"c3qywy",oppc:"u1ngx2",poly:"e4badv",tile:"pkempe",streetview:"mi40eu"};window.chkVersion=function(T){try{var aR=window.localStorage;if(!aR){return false}return aR[T]&&aR[T].length>0}catch(aS){return false}};window.saveVersion=function(T,aW,aU){try{var aS=window.localStorage;if(aS){for(var aR=aS.length,aT=aR-1;aT>=0;aT--){var aX=aS.key(aT);if(aX.indexOf(aU)>-1){aS.removeItem(aX)}}aS.setItem(T,aW)}}catch(aV){}};window.getVersion=function(T){try{var aR=window.localStorage;if(!aR){return""}return aR.getItem(T)}catch(aS){return""}}})();function aG(aT){var T={duration:1000,fps:30,delay:0,transition:g.linear,onStop:function(){}};this._anis=[];if(aT){for(var aR in aT){T[aR]=aT[aR]}}this._opts=T;if(I(T.delay)){var aS=this;setTimeout(function(){aS.start()},T.delay)}else{if(T.delay!=aG.INFINITE){this.start()}}}aG.INFINITE="INFINITE";aG.prototype.start=function(){this._beginTime=w();this._endTime=this._beginTime+this._opts.duration;this._launch()};aG.prototype.add=function(T){this._anis.push(T)};aG.prototype._launch=function(){var aS=this;var T=w();if(T>=aS._endTime){if(au(aS._opts.render)){aS._opts.render(aS._opts.transition(1))}if(au(aS._opts.finish)){aS._opts.finish()}if(aS._anis.length>0){var aR=aS._anis[0];aR._anis=[].concat(aS._anis.slice(1));aR.start()}return}aS.schedule=aS._opts.transition((T-aS._beginTime)/aS._opts.duration);if(au(aS._opts.render)){aS._opts.render(aS.schedule)}if(!aS.terminative){aS._timer=setTimeout(function(){aS._launch()},1000/aS._opts.fps)}};aG.prototype.stop=function(aR){this.terminative=true;for(var T=0;T<this._anis.length;T++){this._anis[T].stop();this._anis[T]=null}this._anis.length=0;if(this._timer){clearTimeout(this._timer);this._timer=null}this._opts.onStop(this.schedule);if(aR){this._endTime=this._beginTime;this._launch()}};aG.prototype.cancel=function(){if(this._timer){clearTimeout(this._timer)}this._endTime=this._beginTime;this.schedule=0};aG.prototype.setFinishCallback=function(T){if(this._anis.length>0){this._anis[this._anis.length-1]._opts.finish=T}else{this._opts.finish=T}};var g={linear:function(T){return T},reverse:function(T){return 1-T},easeInQuad:function(T){return T*T},easeInCubic:function(T){return Math.pow(T,3)},easeOutQuad:function(T){return -(T*(T-2))},easeOutCubic:function(T){return Math.pow((T-1),3)+1},easeInOutQuad:function(T){if(T<0.5){return T*T*2}else{return -2*(T-2)*T-1}return},easeInOutCubic:function(T){if(T<0.5){return Math.pow(T,3)*4}else{return Math.pow(T-1,3)*4+1}},easeInOutSine:function(T){return(1-Math.cos(Math.PI*T))/2}};g["ease-in"]=g.easeInQuad;g["ease-out"]=g.easeOutQuad;var aP={imgPath:"http://map.baidu.com/res_mobile2/images/"};function aQ(aS,T){var aR=aS.style;aR.left=T[0]+"px";aR.top=T[1]+"px"}function m(T){T.style.MozUserSelect="none"}function o(T){return T&&T.parentNode&&T.parentNode.nodeType!=11}function V(aR,T){aF.dom.insertHTML(aR,"beforeEnd",T);return aR.lastChild}function u(T){var aR={left:0,top:0};while(T&&T.offsetParent){aR.left+=T.offsetLeft;aR.top+=T.offsetTop;T=T.offsetParent}return aR}function ad(T){var T=window.event||T;T.stopPropagation?T.stopPropagation():T.cancelBubble=true}function y(T){var T=window.event||T;T.preventDefault?T.preventDefault():T.returnValue=false;return false}function ay(T){ad(T);return y(T)}function H(){var T=document.documentElement,aR=document.body;if(T&&(T.scrollTop||T.scrollLeft)){return[T.scrollTop,T.scrollLeft]}else{if(aR){return[aR.scrollTop,aR.scrollLeft]}else{return[0,0]}}}function q(aR,T){if(!aR||!T){return}return Math.round(Math.sqrt(Math.pow(aR.x-T.x,2)+Math.pow(aR.y-T.y,2)))}function p(aR,T,aS){var aT=document.createElement(aR);if(aS){aT=document.createElementNS(aS,aR)}return aF.dom.setAttrs(aT,T||{})}function al(T){if(T.currentStyle){return T.currentStyle}else{if(T.ownerDocument&&T.ownerDocument.defaultView){return T.ownerDocument.defaultView.getComputedStyle(T,null)}}}function au(T){return typeof T=="function"}function I(T){return typeof T=="number"}function aE(T){return typeof T=="string"}function ae(T){return typeof T!="undefined"}function C(T){return typeof T=="object"}function d(T){return"[object Array]"==Object.prototype.toString.call(T)}function i(){if(typeof i.result!="boolean"){i.result=!!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Shape","1.1")}return i.result}function an(T){return T*Math.PI/180}var av=aF.lang.Event;function ar(){return !!(aF.platform.isIphone||aF.platform.isIpad||aF.platform.isAndroid)}function w(){return(new Date).getTime()}BMap.logCountError=(function(){var bf=true,aZ=true,bj=true,a5=true,a2=new Image(),bh=0,ba=0,bc=0,a0=0,aW=0,bn=0,bb=0,aX=0,aU=0,bg=0,a9=0,aS=0,aT=0,a7=0,be=0,a1=0,bm=0,aR=0,bl=0,T=0,bi=0,a8=0,aY=0,bk=0;function bd(){if(window.speedTest&&window.speedTest.ab){bm=window.speedTest.ab}bd=function(){return bm};return bm}function a6(bp,bq,bs,br){var bo=(12<=br&&br<=18);if(bq){if(bp){ba+=1;if(bo){aX+=1}}else{bh+=1;if(bo){bb+=1}}if(bs==1){if(bp){bn+=1;if(bo){aS+=1}}else{aW+=1;if(bo){a9+=1}}}}else{if(bp){a0+=1;if(bo){bg+=1}}else{bc+=1;if(bo){aU+=1}}}if(bf){bf=false;setTimeout(function(){var bt=(Math.random()*100000000).toFixed(0);bf=true;a2.src="http://map.baidu.com/mobile/img/transparent.gif?type=pic&newmap=1&t="+bt+"&code=20066&pic_pl_error="+bh+"&pic_ph_error="+ba+"&pic_pl_all="+bc+"&pic_ph_all="+a0+"&pic_pl_s="+aW+"&pic_ph_s="+bn+"&pic_pl_error_1="+bb+"&pic_ph_error_1="+aX+"&pic_pl_all_1="+aU+"&pic_ph_all_1="+bg+"&pic_pl_s_1="+a9+"&pic_ph_s_1="+bn+"&ab="+bd();bh=0;ba=0;bc=0;a0=0;aW=0;bn=0;bb=0;aX=0;aU=0;bg=0;a9=0;aS=0},10000)}}function a3(bo){if(bo){a7+=1}else{a1+=1}if(aZ){aZ=false;setTimeout(function(){var bp=(Math.random()*100000000).toFixed(0);aZ=true;a2.src="http://map.baidu.com/mobile/img/transparent.gif?type=vec&newmap=1&t="+bp+"&code=20066&vec_pl_error="+aT+"&vec_ph_error="+a7+"&vec_pl_all="+be+"&vec_ph_all="+a1+"&ab="+bd();aT=0;a7=0;be=0;a1=0},10000)}}function a4(bo,bp){var bq=bd();if(bq==1){aR+=bo;bl+=bp}if(bq==2){T+=bo;bi+=bp}if(bj){bj=false;setTimeout(function(){var br=(Math.random()*100000000).toFixed(0);bj=true;a2.src="http://map.baidu.com/mobile/img/transparent.gif?res=webapp&counttype=touch&newmap=1&t="+br+"&move1="+aR+"&zoom1="+bl+"&move2="+T+"&zoom2="+bi;aR=0;bl=0;T=0;bi=0},10000)}}function aV(bo,bp){if(bo){a8+=1;if(bp==1){bk+=1}}else{aY+=1}if(a5){a5=false;setTimeout(function(){var bq=(Math.random()*100000000).toFixed(0);a5=true;a2.src="http://map.baidu.com/mobile/img/transparent.gif?type=stpic&t="+bq+"&code=20066&st_pic_error="+a8+"&st_pic_all="+aY+"&st_pic_s="+bk;a8=0;aY=0;bk=0},10000)}}return{countPic:a6,countVec:a3,countTouch:a4,countStPic:aV}})();function aa(aR,T){if(aR.data("events")&&aR.data("events")[T]){return true}else{return false}}var aJ={request:function(aS,T){var aR=p("script",{src:aS,type:"text/javascript",charset:"utf-8"});if(T){BMap.logCountError.countVec(false);aR.onerror=function(){BMap.logCountError.countVec(true)}}if(aR.addEventListener){aR.addEventListener("load",function(aU){var aT=aU.target;aT.parentNode.removeChild(aT)},false)}else{if(aR.attachEvent){aR.attachEvent("onreadystatechange",function(aU){var aT=window.event.srcElement;if(aT&&(aT.readyState=="loaded"||aT.readyState=="complete")){aT.parentNode.removeChild(aT)}})}}document.getElementsByTagName("head")[0].appendChild(aR);aR=null}};window.sendReqNo=0;function ao(){}aF.object.extend(ao,{Request:{INITIAL:-1,WAITING:0,COMPLETED:1},getDependency:function(){return{poly:["marker"]}},Config:{_baseUrl:"http://map.baidu.com/mobile/?qt=getMobileModules&v=2&"},delayFlag:false,ModuleTree:{_modules:{},_arrMdls:[]},load:function(aR,aT){var T=this.getModule(aR);if(T._status==this.Request.COMPLETED){return}else{if(T._status==this.Request.INITIAL){this.combine(aR);this.pushUniqueMdl(aR);var aS=this;if(aS.delayFlag==false){aS.delayFlag=true;window.setTimeout(function(){var a0=aS.ModuleTree._arrMdls.slice(0);var a2=[];for(var aW=0,aV=a0.length;aW<aV;aW++){var a1=a0[aW],aU=window.asyncMdlVer[a1],aY="async_"+a1+"_"+aU;if(!window.chkVersion(aY)){a0[a0[aW]]="";a2.push(a1+"_"+aU)}else{a0[a0[aW]]=window.getVersion(aY)}}if(a2.length==0){for(var aW=0,aV=a0.length;aW<aV;aW++){var a3=a0[aW],aY="async_"+a3+"_"+window.asyncMdlVer[a3],aZ=window.getVersion(aY);ao.run(a3,aZ)}}else{var aX=aS.Config._baseUrl+"mod="+a2.join(",")+"&sendReqNo="+window.sendReqNo+"&cbk=_jsload";aJ.request(aX);window["sendReqNo"+window.sendReqNo]=a0;window.sendReqNo++}aS.delayFlag=false;aS.ModuleTree._arrMdls.length=0},1)}T._status=this.Request.WAITING}T._callbacks.push(aT)}},combine:function(T){var aS=this.getDependency();if(T&&aS[T]){var aS=aS[T];for(var aR=0;aR<aS.length;aR++){this.combine(aS[aR]);if(!this.ModuleTree._modules[aS[aR]]){this.pushUniqueMdl(aS[aR])}}}},pushUniqueMdl:function(aT){var T=this.ModuleTree._arrMdls;for(var aS=0,aR=T.length;aS<aR;aS++){if(T[aS]==aT){return}}T.push(aT)},getModule:function(aR){var T;if(!this.ModuleTree._modules[aR]){this.ModuleTree._modules[aR]={};this.ModuleTree._modules[aR]._status=this.Request.INITIAL;this.ModuleTree._modules[aR]._callbacks=[]}T=this.ModuleTree._modules[aR];return T},run:function(aT,aW){var aR="async_"+aT+"_"+window.asyncMdlVer[aT],aV="async_"+aT;if(!window.chkVersion(aR)){window.saveVersion(aR,aW,aV)}var aS=this.getModule(aT);try{eval(aW)}catch(aX){return}aS._status=this.Request.COMPLETED;for(var aU=0,T=aS._callbacks.length;aU<T;aU++){aS._callbacks[aU]()}aS._callbacks.length=0}});window._jsload=function(aV,aX,aW){var T=window["sendReqNo"+aW],aS=aV.split("_")[0];T[aS]=aX;var aU=true;for(var aT=0,aR=T.length;aT<aR;aT++){if(T[T[aT]].length<=0){aU=false;break}}if(aU){for(var aT=0,aR=T.length;aT<aR;aT++){var aV=T[aT],aX=T[aV];ao.run(aV,aX)}T.length=0;delete window["sendReqNo"+aW]}};function aM(T,aR){this.x=T||0;this.y=aR||0}aM.prototype.equals=function(T){return T&&T.x==this.x&&T.y==this.y};function U(aR,T){this.width=aR||0;this.height=T||0}U.prototype.equals=function(T){return T&&this.width==T.width&&this.height==T.height};function J(T,aR){if(!T){return}this._position=T;this.guid="spot"+(J.guid++);aR=aR||{};this._text=aR.text||"";this._offsets=aR.offsets?aR.offsets.slice(0):[5,5,5,5];this._userData=aR.userData||null;this._minZoom=aR.minZoom||null;this._maxZoom=aR.maxZoom||null}J.guid=0;aF.extend(J.prototype,{initialize:function(T){if(this._minZoom==null){this._minZoom=T.config.minZoom}if(this._maxZoom==null){this._maxZoom=T.config.maxZoom}},setPosition:function(T){if(T instanceof f){this._position=T}},getPosition:function(){return this._position},setText:function(T){this._text=T},getText:function(){return this._text},setUserData:function(T){this._userData=T},getUserData:function(){return this._userData}});function M(){this._map=null;this._container;this._type="control";this._visible=true}aF.lang.inherits(M,aF.lang.Class,"Control");aF.extend(M.prototype,{initialize:function(T){this._map=T;if(this._container){T.container.appendChild(this._container);return this._container}return},_i:function(T){if(!this._container&&this.initialize&&au(this.initialize)){this._container=this.initialize(T)}this._opts=this._opts||{printable:false};this._setStyle();this._setPosition();if(this._container){this._container._jsobj=this}},_setStyle:function(){var aR=this._container;if(aR){var T=aR.style;T.position="absolute";T.zIndex=this._container.style.zIndex||"10";T.MozUserSelect="none";T.WebkitTextSizeAdjust="none";if(!this._opts.printable){aF.dom.addClass(aR,"BMap_noprint")}}},remove:function(){this._map=null;if(!this._container){return}this._container.parentNode&&this._container.parentNode.removeChild(this._container);this._container._jsobj=null;this._container=null},_render:function(){this._container=V(this._map.container,"<div unselectable='on'></div>");if(this._visible==false){aF.dom.hide(this._container)}return this._container},_setPosition:function(){this.setAnchor(this._opts.anchor)},setAnchor:function(aT){if(this.anchorFixed||!I(aT)||isNaN(aT)||aT<BMAP_ANCHOR_TOP_LEFT||aT>BMAP_ANCHOR_BOTTOM_RIGHT){aT=this.defaultAnchor}this._opts=this._opts||{printable:false};this._opts.offset=this._opts.offset||this.defaultOffset;var aS=this._opts.anchor;this._opts.anchor=aT;if(!this._container){return}var aV=this._container;var T=this._opts.offset.width;var aU=this._opts.offset.height;if(this instanceof O){if(this._map&&this._map.highResolutionEnabled()){aV.childNodes[1].style.height="2px";aV.childNodes[2].style.height="4px";aV.childNodes[3].style.height="4px";aV.style.height="19px"}}aV.firstChild.style.cssText="font-size:11px;line-height:18px;";aV.style.left=aV.style.top=aV.style.right=aV.style.bottom="auto";switch(aT){case BMAP_ANCHOR_TOP_LEFT:aV.style.top=aU+"px";aV.style.left=T+"px";break;case BMAP_ANCHOR_TOP_RIGHT:aV.style.top=aU+"px";aV.style.right=T+"px";break;case BMAP_ANCHOR_BOTTOM_LEFT:aV.style.bottom=aU+"px";aV.style.left=T+"px";break;case BMAP_ANCHOR_BOTTOM_RIGHT:aV.style.bottom=aU+"px";aV.style.right=T+"px";break;default:break}var aR=["TL","TR","BL","BR"];aF.dom.removeClass(this._container,"anchor"+aR[aS]);aF.dom.addClass(this._container,"anchor"+aR[aT])},getAnchor:function(){return this._opts.anchor},setOffset:function(T){if(!(T instanceof U)){return}this._opts=this._opts||{printable:false};this._opts.offset=new U(T.width,T.height);if(!this._container){return}this.setAnchor(this._opts.anchor)},getOffset:function(){return this._opts.offset},getDom:function(){return this._container},show:function(){if(this._visible==true){return}this._visible=true;if(this._container){aF.dom.show(this._container)}},hide:function(){if(this._visible==false){return}this._visible=false;if(this._container){aF.dom.hide(this._container)}},isPrintable:function(){return !!this._opts.printable},isVisible:function(){if(!this._container&&!this._map){return false}return !!this._visible}});window.BMAP_ANCHOR_TOP_LEFT=0;window.BMAP_ANCHOR_TOP_RIGHT=1;window.BMAP_ANCHOR_BOTTOM_LEFT=2;window.BMAP_ANCHOR_BOTTOM_RIGHT=3;function O(T){M.call(this);T=T||{};this._opts={printable:false};this._opts=aF.object.extend(aF.object.extend(this._opts,{color:"black",unit:"metric"}),T);this.defaultAnchor=BMAP_ANCHOR_BOTTOM_LEFT;this.defaultOffset=new U(81,18);this.setAnchor(T.anchor);this._units={metric:{name:"metric",conv:1,incon:1000,u1:"\u7c73",u2:"\u516c\u91cc"}};if(!this._units[this._opts.unit]){this._opts.unit="metric"}this._scaleText=null;this._numberArray={};this._asyncLoadCode()}window.BMAP_UNIT_METRIC="metric";aF.lang.inherits(O,M,"ScaleControl");aF.object.extend(O.prototype,{initialize:function(T){this._map=T;return this._container},setColor:function(T){this._opts.color=T+""},getColor:function(){return this._opts.color},_asyncLoadCode:function(){var T=this;ao.load("control",function(){T._asyncDraw()})}});function s(T,aR){if(T&&!aR){aR=T}this._sw=this._ne=null;this._swLng=this._swLat=null;this._neLng=this._neLat=null;if(T){this._sw=new f(T.lng,T.lat);this._ne=new f(aR.lng,aR.lat);this._swLng=T.lng;this._swLat=T.lat;this._neLng=aR.lng;this._neLat=aR.lat}}aF.object.extend(s.prototype,{isEmpty:function(){return !this._sw||!this._ne},equals:function(T){if(!(T instanceof s)||this.isEmpty()){return false}return this.getSouthWest().equals(T.getSouthWest())&&this.getNorthEast().equals(T.getNorthEast())},getSouthWest:function(){return this._sw},getNorthEast:function(){return this._ne},getCenter:function(){if(this.isEmpty()){return null}return new f((this._swLng+this._neLng)/2,(this._swLat+this._neLat)/2)},extend:function(T){if(!(T instanceof f)){return}var aR=T.lng,aS=T.lat;if(!this._sw){this._sw=new f(0,0)}if(!this._ne){this._ne=new f(0,0)}if(!this._swLng||this._swLng>aR){this._sw.lng=this._swLng=aR}if(!this._neLng||this._neLng<aR){this._ne.lng=this._neLng=aR}if(!this._swLat||this._swLat>aS){this._sw.lat=this._swLat=aS}if(!this._neLat||this._neLat<aS){this._ne.lat=this._neLat=aS}},toSpan:function(){if(this.isEmpty()){return new f(0,0)}return new f(Math.abs(this._neLng-this._swLng),Math.abs(this._neLat-this._swLat))}});function f(T,aR){this.lng=parseFloat(T);this.lat=parseFloat(aR)}f.prototype.equals=function(T){return T&&this.lat==T.lat&&this.lng==T.lng};function ap(){}ap.prototype.lngLatToPoint=function(){throw"lngLatToPoint\u65b9\u6cd5\u672a\u5b9e\u73b0"};ap.prototype.pointToLngLat=function(){throw"pointToLngLat\u65b9\u6cd5\u672a\u5b9e\u73b0"};function ax(T){this._mapType=T}ax.prototype=new ap();aF.extend(ax.prototype,{pointToPixel:function(aR,aV,aU,aT,aW){if(!aR){return}var aS=this._mapType.getZoomUnits(aV);var T=Math.round((aR.lng-aU.lng)/aS+aT.width/2);var aX=Math.round((aU.lat-aR.lat)/aS+aT.height/2);return new aM(T,aX)},pixelToPoint:function(T,aY,aU,aS,aR){if(!T){return}var aX=this._mapType.getZoomUnits(aY);var aV=aU.lng+aX*(T.x-aS.width/2);var aT=aU.lat-aX*(T.y-aS.height/2);var aW=new f(aV,aT);return aW}});function L(){this._type="overlay"}aF.lang.inherits(L,aF.lang.Class,"Overlay");L.getZIndex=function(T){T=T*1;if(!T){return 0}return(T*-100000)<<1};aF.extend(L.prototype,{_i:function(T){if(!this.domElement&&au(this.initialize)){this.domElement=this.initialize(T);if(this.domElement){this.domElement.style.WebkitUserSelect="none"}}this.draw()},initialize:function(T){throw"initialize\u65b9\u6cd5\u672a\u5b9e\u73b0"},draw:function(){throw"draw\u65b9\u6cd5\u672a\u5b9e\u73b0"},remove:function(){if(this.domElement&&this.domElement.parentNode){this.domElement.parentNode.removeChild(this.domElement)}this.domElement=null;this.dispatchEvent(new av("onremove"))},hide:function(){if(this.domElement){aF.dom.hide(this.domElement)}},show:function(){if(this.domElement){aF.dom.show(this.domElement)}},isVisible:function(){if(!this.domElement){return false}if(this.domElement.style.display=="none"||this.domElement.style.visibility=="hidden"){return false}return true}});BMap.register(function(aS){var T=aS.temp;T.overlayDiv=aS.overlayDiv=aR(aS.platform,200);aS._panes.floatPane=aR(T.overlayDiv,800);aS._panes.markerMouseTarget=aR(T.overlayDiv,700);aS._panes.floatShadow=aR(T.overlayDiv,600);aS._panes.labelPane=aR(T.overlayDiv,500);aS._panes.markerPane=aR(T.overlayDiv,400);aS._panes.markerShadow=aR(T.overlayDiv,300);aS._panes.mapPane=aR(T.overlayDiv,200);function aR(aT,aW){var aV=p("div"),aU=aV.style;aU.position="absolute";aU.top=aU.left=aU.width=aU.height="0";aU.zIndex=aW;aT.appendChild(aV);return aV}});function aC(){aF.lang.Class.call(this);L.call(this);this.map=null;this._visible=true;this._dblclickTime=0}aF.lang.inherits(aC,L,"OverlayInternal");aF.extend(aC.prototype,{initialize:function(T){this.map=T;aF.lang.Class.call(this,this.guid);return null},getMap:function(){return this.map},draw:function(){},remove:function(){this.map=null;aF.lang.decontrol(this.guid);L.prototype.remove.call(this)},hide:function(){if(this._visible==false){return}this._visible=false},show:function(){if(this._visible==true){return}this._visible=true},isVisible:function(){if(!this.domElement){return false}return !!this._visible},getContainer:function(){return this.domElement},setConfig:function(aR){aR=aR||{};for(var T in aR){this._config[T]=aR[T]}},setZIndex:function(T){this.zIndex=T},enableMassClear:function(){this._config.enableMassClear=true},disableMassClear:function(){this._config.enableMassClear=false}});function aq(){this.map=null;this._overlays={};this._customOverlays=[]}BMap.register(function(aR){var T=new aq();T.map=aR;aR._overlays=T._overlays;aR._customOverlays=T._customOverlays;aR.addEventListener("load",function(aS){T.draw(aS)});aR.addEventListener("moveend",function(aS){T.draw(aS)});aR.addEventListener("zoomend",function(aS){T.draw(aS)});aR.addEventListener("addoverlay",function(aW){var aT=aW.target;if(aT instanceof aC){if(!T._overlays[aT.guid]){T._overlays[aT.guid]=aT}}else{var aV=false;for(var aU=0,aS=T._customOverlays.length;aU<aS;aU++){if(T._customOverlays[aU]===aT){aV=true;break}}if(!aV){T._customOverlays.push(aT)}}});aR.addEventListener("removeoverlay",function(aV){var aT=aV.target;if(aT instanceof aC){delete T._overlays[aT.guid]}else{for(var aU=0,aS=T._customOverlays.length;aU<aS;aU++){if(T._customOverlays[aU]===aT){T._customOverlays.splice(aU,1);break}}}});aR.addEventListener("clearoverlays",function(aV){for(var aU in T._overlays){if(T._overlays[aU]._config.enableMassClear){T._overlays[aU].remove();delete T._overlays[aU]}}for(var aT=0,aS=T._customOverlays.length;aT<aS;aT++){if(T._customOverlays[aT].enableMassClear!=false){T._customOverlays[aT].remove();T._customOverlays[aT]=null;T._customOverlays.splice(aT,1);aT--;aS--}}})});aq.prototype.draw=function(aS){for(var aR in this._overlays){this._overlays[aR].draw()}aF.array.each(this._customOverlays,function(aT){aT.draw()});if(BMap.DrawerSelector){var T=BMap.DrawerSelector.getDrawer(this.map);T.setPalette()}};function at(T){aC.call(this);this._config={strokeColor:"#3a6bdb",strokeWeight:5,strokeOpacity:0.65,strokeStyle:"solid",enableMassClear:true,getParseTolerance:null,getParseCacheIndex:null,enableParse:true,clickable:true};T=T||{};this.setConfig(T);if(this._config.strokeWeight<=0){this._config.strokeWeight=5}if(this._config.strokeOpacity<0||this._config.strokeOpacity>1){this._config.strokeOpacity=0.65}if(this._config.strokeStyle!="solid"&&this._config.strokeStyle!="dashed"){this._config.strokeStyle="solid"}if(ae(T.enableClicking)){this._config.clickable=T.enableClicking}this.domElement=null;this._bounds=new BMap.Bounds(0,0,0,0);this._parseCache=[];this._temp={}}aF.lang.inherits(at,aC,"Graph");at.getGraphPoints=function(aR){var T=[];if(!aR){return T}if(aE(aR)){var aS=aR.split(";");aF.array.each(aS,function(aU){var aT=aU.split(",");T.push(new f(aT[0],aT[1]))})}if(aR.constructor==Array&&aR.length>0){T=aR}return T};at.parseTolerance=[0.09,0.005,0.0001,0.00001];aF.extend(at.prototype,{initialize:function(T){this.map=T;return null},draw:function(){},setPath:function(T){this._parseCache.length=0;this.points=at.getGraphPoints(T).slice(0);this._calcBounds()},_calcBounds:function(){if(!this.points){return}var T=this;T._bounds=new s();aF.array.each(this.points,function(aR){T._bounds.extend(aR)})},getPath:function(){return this.points},setPositionAt:function(aR,T){if(!T||!this.points[aR]){return}this._parseCache.length=0;this.points[aR]=new f(T.lng,T.lat);this._calcBounds()},setStrokeColor:function(T){this._config.strokeColor=T},getStrokeColor:function(){return this._config.strokeColor},setStrokeWeight:function(T){if(T>0){this._config.strokeWeight=T}},getStrokeWeight:function(){return this._config.strokeWeight},setStrokeOpacity:function(T){if(!T||T>1||T<0){return}this._config.strokeOpacity=T},getStrokeOpacity:function(){return this._config.strokeOpacity},setStrokeStyle:function(T){if(T!="solid"&&T!="dashed"){return}this._config.strokeStyle=T},getStrokeStyle:function(){return this._config.strokeStyle},getBounds:function(){return this._bounds},remove:function(){aC.prototype.remove.call(this);this._parseCache.length=0}});function r(aR,aS,aT){if(!aR||!aS){return}this.imageUrl=aR;this.size=aS;var T=new U(Math.floor(aS.width/2),Math.floor(aS.height/2));var aU={anchor:T,imageOffset:new U(0,0)};aT=aT||{};aF.extend(aU,aT);this.anchor=aU.anchor;this.imageOffset=aU.imageOffset;this.printImageUrl=aT.printImageUrl||""}var N=r.prototype;N.setImageUrl=function(T){if(!T){return}this.imageUrl=T};N.setPrintImageUrl=function(T){if(!T){return}this.printImageUrl=T};N.setSize=function(T){if(!T){return}this.size=new U(T.width,T.height)};N.setAnchor=function(T){if(!T){return}this.anchor=new U(T.width,T.height)};N.setImageOffset=function(T){if(!T){return}this.imageOffset=new U(T.width,T.height)};N.toString=function(){return"Icon"};var af=aP.imgPath+"red_marker.png";var aD=new r(af,new U(19,25),{anchor:new U(10,25)});var F=new r(af,new U(20,11),{anchor:new U(6,11),imageOffset:new U(-19,-13)});function D(T,aS){aC.call(this);aS=aS||{};this.point=T;this.map=null;this._config={offset:new U(0,0),icon:aD,shadow:F,title:"",baseZIndex:0,clickable:true,zIndexFixed:false,isTop:false,enableMassClear:true};this.setConfig(aS);if(aS.icon&&!aS.shadow){this._config.shadow=null}if(ae(aS.enableClicking)){this._config.clickable=aS.enableClicking}var aR=this;ao.load("marker",function(){aR._draw()})}D.TOP_ZINDEX=L.getZIndex(-90)+1000000;aF.lang.inherits(D,aC,"Marker");aF.extend(D.prototype,{setIcon:function(T){if(T instanceof r){this._config.icon=T}},getIcon:function(){return this._config.icon},setShadow:function(T){if(T instanceof r){this._config.shadow=T}},getShadow:function(){return this._config.shadow},getPosition:function(){return this.point},setPosition:function(T){if(T instanceof f){this.point=new f(T.lng,T.lat)}},setTop:function(aR,T){this._config.isTop=!!aR;if(aR){this._addi=T||0}},setTitle:function(T){this._config.title=T+""},getTitle:function(){return this._config.title},setOffset:function(T){if(T instanceof U){this._config.offset=T}},getOffset:function(){return this._config.offset}});function ah(T,aS){at.call(this,aS);this.setPath(T);var aR=this;ao.load("poly",function(){aR._draw()})}aF.lang.inherits(ah,at,"Polyline");function aB(T){this.map=T;this.mapTypeLayers=[];this.tileLayers=[];this.bufferNumber=300;this.realBufferNumber=0;this.mapTiles={};this.bufferTiles={};this.numLoading=0;this.isFirstTile=true;this._mapTypeLayerContainer=this._createDiv(1);this._vectorLayerContainer=this._createDiv(2);this._normalLayerContainer=this._createDiv(3);T.platform.appendChild(this._mapTypeLayerContainer);T.platform.appendChild(this._vectorLayerContainer);T.platform.appendChild(this._normalLayerContainer)}BMap.register(function(aR){var T=new aB(aR);T.initialize();aR.tileMgr=T});aF.extend(aB.prototype,{initialize:function(){var T=this,aR=T.map;aR.addEventListener("loadcode",function(){T.loadTiles()});aR.addEventListener("addtilelayer",function(aS){T.addTileLayer(aS)});aR.addEventListener("removetilelayer",function(aS){T.removeTileLayer(aS)});aR.addEventListener("zoomstartcode",function(aS){T._zoom(aS)})},loadTiles:function(){var aT=this;if(!this.loaded){aT.initMapTypeTiles()}aT.moveGridTiles();if(!this.loaded){this.loaded=true;var T="tile",aS=window.asyncMdlVer[T],aR="async_"+T+"_"+aS,aU=window.getVersion(aR);if(aS&&aU){ao.run(T,aU);aT._asyncLoadTiles()}else{ao.load("tile",function(){aT._asyncLoadTiles()})}}},initMapTypeTiles:function(){var aR=this.map.getMapType();var aS=aR.getTileLayers();for(var T=0;T<aS.length;T++){var aT=new A();aF.extend(aT,aS[T]);this.mapTypeLayers.push(aT);aT.initialize(this.map,this._mapTypeLayerContainer)}},_createDiv:function(aR){var T=p("div");T.style.position="absolute";T.style.left=T.style.top="0";T.style.zIndex=aR;return T},_checkTilesLoaded:function(){this.numLoading--;var T=this;if(this.isFirstTile){this.map.dispatchEvent(new av("onfirsttileloaded"));this.isFirstTile=false}if(this.numLoading==0){if(this._checkLoadedTimer){clearTimeout(this._checkLoadedTimer);this._checkLoadedTimer=null}this._checkLoadedTimer=setTimeout(function(){if(T.numLoading==0){T.map.dispatchEvent(new av("ontilesloaded"));T.isFirstTile=true}T._checkLoadedTimer=null},80)}},getTileName:function(T,aR){return"TILE-"+aR.guid+"-"+T[0]+"-"+T[1]+"-"+T[2]},hideTile:function(aR){var T=aR.img;if(T){if(o(T)){T.parentNode.removeChild(T)}}delete this.mapTiles[aR.name];if(!aR.loaded){T=null;aR._callCbks();aR.img=null;aR.mgr=null}},moveGridTiles:function(){var bd=this.mapTypeLayers,bb=bd.concat(this.tileLayers),a8=bb.length;for(var be=0;be<a8;be++){var aT=bb[be];if(aT.baseLayer){this.tilesDiv=aT.tilesDiv;var aV=this.tilesDiv;if(this.map.getZoom()>=this.map.config.vectorMapLevel){aV.style.display="none";continue}else{aV.style.display="block"}}var a2=this.map,a3=a2.getMapType(),bl=a3.getProjection(),aS=a2.zoomLevel,a7=a2.mercatorCenter;this.mapCenterPoint=a7;var bh=a3.getZoomUnits(aS),aZ=a3.getZoomFactor(aS),aY=Math.ceil(a7.lng/aZ),bc=Math.ceil(a7.lat/aZ),a1=a3.getTileSize(),a4=[aY,bc,(a7.lng-aY*aZ)/aZ*a1,(a7.lat-bc*aZ)/aZ*a1],a0=a4[0]-Math.ceil((a2.width/2-a4[2])/a1),bo=a4[1]-Math.ceil((a2.height/2-a4[3])/a1),bf=a4[0]+Math.ceil((a2.width/2+a4[2])/a1),bm=0,a5=a4[1]+Math.ceil((a2.height/2+a4[3])/a1)+bm;this.areaCenter=new f(a7.lng,a7.lat);var aR=this.mapTiles,T=-this.areaCenter.lng/bh,bp=this.areaCenter.lat/bh,a9=[Math.round(T),Math.round(bp)],bi=a2.getZoom();for(var a6 in aR){var aW=aR[a6],bn=aW.info;if(bn[2]!=bi||(bn[2]==bi&&(a0>bn[0]||bf<=bn[0]||bo>bn[1]||a5<=bn[1]))){this.hideTile(aW)}}var aU=-a2.offsetX+a2.width/2,aX=-a2.offsetY+a2.height/2;aT.tilesDiv.style.left=Math.round(T+aU)-a9[0]+"px";aT.tilesDiv.style.top=Math.round(bp+aX)-a9[1]+"px";if(this.tilesOrder){this.tilesOrder.length=0}else{this.tilesOrder=[]}if(a2._viewTiles){a2._viewTiles.length=0}else{a2._viewTiles=[]}for(var bk=a0;bk<bf;bk++){for(var bj=bo;bj<a5;bj++){this.tilesOrder.push([bk,bj]);a2._viewTiles.push({x:bk,y:bj})}}this.tilesOrder.sort((function(bq){return function(br,bs){return((0.4*Math.abs(br[0]-bq[0])+0.6*Math.abs(br[1]-bq[1]))-(0.4*Math.abs(bs[0]-bq[0])+0.6*Math.abs(bs[1]-bq[1])))}})([a4[0]-1,a4[1]-1]));if(!this.map.enableLoadTiles){return}var ba=aT.baseLayer?true:false;if(ba){this.map.dispatchEvent(new av("ontilesbegin"));this.numLoading+=this.tilesOrder.length}for(var bk=0,bg=this.tilesOrder.length;bk<bg;bk++){this.showTile([this.tilesOrder[bk][0],this.tilesOrder[bk][1],bi],a9,aT)}}return},showTile:function(aV,aU,aY){var a2=this,a0=aY.baseLayer?true:false;a2.centerPos=aU;var aX=this.map.getMapType(),aS=a2.getTileName(aV,aY),a5=aX.getTileSize(),aT=(aV[0]*a5)+aU[0],aR=(-1-aV[1])*a5+aU[1],aZ=[aT,aR],a1=this.mapTiles[aS];if(a1&&a1.img){aQ(a1.img,aZ);if(a0){if(a1.loaded){this._checkTilesLoaded()}else{a1._addLoadCbk(function(){a2._checkTilesLoaded()})}}return}a1=this.bufferTiles[aS];if(a1&&a1.img){aY.tilesDiv.insertBefore(a1.img,aY.tilesDiv.lastChild);this.mapTiles[aS]=a1;aQ(a1.img,aZ);if(a0){if(a1.loaded){this._checkTilesLoaded()}else{a1._addLoadCbk(function(){a2._checkTilesLoaded()})}}return}var a4=a5*Math.pow(2,(aX.getMaxZoom()-aV[2])),a3=new f(aV[0]*a4,aV[1]*a4),aW=new aM(aV[0],aV[1]),T=aY.getTilesUrl(aW,aV[2]);a1=new aw(this,T,aZ,aV,aY);if(a0){a1._addLoadCbk(function(){a2._checkTilesLoaded()})}a1._load();this.mapTiles[aS]=a1},addTileLayer:function(aT){var aS=this,T=aT.target;for(var aR=0;aR<aS.tileLayers.length;aR++){if(aS.tileLayers[aR]==T){return}}T.initialize(this.map,this._normalLayerContainer);aS.tileLayers.push(T)},removeTileLayer:function(aU){var aT=this,aR=aU.target;for(var aS=0,T=aT.tileLayers.length;aS<T;aS++){if(aR==aT.tileLayers[aS]){aT.tileLayers.splice(aS,1)}}aR.remove()},_zoom:function(){var T=this;setTimeout(function(){T.moveGridTiles();T.map.dispatchEvent(new av("onzoomend"))},10)}});function aw(aX,T,aU,aR,aT){this.mgr=aX;this.position=aU;this._cbks=[];this.name=aX.getTileName(aR,aT);this.info=aR;this.level=parseInt(aR[2],10);this._transparentPng=aT.isTransparentPng();var aY=p("img");m(aY);aY.galleryImg=false;var aW=aY.style;var aS=aX.map.getMapType(),aZ=aS.getTileSize();aW.position="absolute";aW.width=aZ+"px";aW.height=aZ+"px";aW.left=aU[0]+"px";aW.top=aU[1]+"px";this.img=aY;this.src=T;var aV=this;this.img.onload=function(a5){aV.loaded=true;if(!aV.mgr){return}var a1=aV.mgr;var a0=a1.bufferTiles;if(!a0[aV.name]){a1.realBufferNumber++;a0[aV.name]=aV}if(aV.img&&!o(aV.img)){if(aT.tilesDiv){aT.tilesDiv.appendChild(aV.img)}}var a3=a1.realBufferNumber-a1.bufferNumber;for(var a4 in a0){if(a3<=0){break}if(!a1.mapTiles[a4]){a0[a4].mgr=null;var a2=a0[a4].img;if(a2&&a2.parentNode){a2.parentNode.removeChild(a2)}a2=null;a0[a4].img=null;delete a0[a4];a1.realBufferNumber--;a3--}}aV._callCbks()};this.isHighResolution=aX.map.highResolutionEnabled();this.img.onerror=function(){var a1=aV.img,a3=a1?a1.getAttribute("errorCount"):true;if(a1&&(!a3||a3&&a3<5)){a3=a3||0;a3++;a1.src=T;BMap.logCountError.countPic(aV.isHighResolution,false,a3,aV.level);a1.setAttribute("errorCount",a3);BMap.logCountError.countPic(aV.isHighResolution,true,a3,aV.level)}else{aV._callCbks();if(!aV.mgr){return}var a0=aV.mgr;var a2=a0.map.getMapType();if(a2.getErrorImageUrl()){aV.error=true;aV.img.src=a2.getErrorImageUrl();if(aV.img&&!o(aV.img)){aT.tilesDiv.appendChild(aV.img)}}BMap.logCountError.countPic(aV.isHighResolution,true,6,aV.level)}};aY=null}aw.prototype._addLoadCbk=function(T){this._cbks.push(T)};aw.prototype._load=function(){this.img.src=this.src;BMap.logCountError.countPic(this.isHighResolution,false,0,this.level)};aw.prototype._callCbks=function(){var aR=this;for(var T=0;T<aR._cbks.length;T++){aR._cbks[T]()}aR._cbks.length=0};function A(T){this.opts=T||{};this.transparentPng=this.opts.transparentPng||false;this.baseLayer=this.opts.baseLayer||false;this.zIndex=this.opts.zIndex||0;this.guid=A._guid++}A._guid=0;aF.lang.inherits(A,aF.lang.Class,"TileLayer");aF.extend(A.prototype,{initialize:function(aS,T){if(this.baseLayer){this.zIndex=-100}this.map=aS;if(!this.tilesDiv){var aT=p("div");var aR=aT.style;aR.position="absolute";aR.zIndex=this.zIndex;aR.left=Math.ceil(-aS.offsetX+aS.width/2)+"px";aR.top=Math.ceil(-aS.offsetY+aS.height/2)+"px";T.appendChild(aT);this.tilesDiv=aT}},remove:function(){if(this.tilesDiv&&this.tilesDiv.parentNode){this.tilesDiv.innerHTML="";this.tilesDiv.parentNode.removeChild(this.tilesDiv)}delete this.tilesDiv},isTransparentPng:function(){return this.transparentPng},getTilesUrl:function(aR,aS){var T="";if(this.opts.tileUrlTemplate){T=this.opts.tileUrlTemplate.replace(/\{X\}/,aR.x);T=T.replace(/\{Y\}/,aR.y);T=T.replace(/\{Z\}/,aS)}return T},getMapType:function(){return this.mapType}});function aH(T){A.call(this,T);this._opts={};T=T||{};this._opts=aF.object.extend(this._opts,T);if(this._opts.predictDate){if(this._opts.predictDate.weekday<1||this._opts.predictDate.weekday>7){this._opts.predictDate=1}if(this._opts.predictDate.hour<0||this._opts.predictDate.hour>23){this._opts.predictDate.hour=0}}this._tileUrl="http://its.map.baidu.com:8002/traffic/"}aH.prototype=new A();aH.prototype.initialize=function(aR,T){A.prototype.initialize.call(this,aR,T);this._map=aR};aH.prototype.isTransparentPng=function(){return true};aH.prototype.getTilesUrl=function(aW,aR){var aX="";if(this._opts.predictDate){aX="HistoryService?day="+(this._opts.predictDate.weekday-1)+"&hour="+this._opts.predictDate.hour+"&t="+new Date().getTime()+"&"}else{aX="TrafficTileService?time="+new Date().getTime()+"&"}var aS=this._map,aY=aW.x,aT=aW.y,aV=Math.floor(aY/200),aU=Math.floor(aT/200),T=this._tileUrl+aX+"level="+aR+"&x="+aY+"&y="+aT;return T.replace(/-(\d+)/gi,"M$1")};function aK(T,aR,aS){this._name=T;this._layers=aR instanceof A?[aR]:aR.slice(0);this._opts={tips:"",labelText:"",minZoom:1,maxZoom:18,tileSize:256,textColor:"black",errorImageUrl:"",projection:new ax(this)};if(this._layers.length==1){this._layers[0].baseLayer=true}aF.extend(this._opts,aS||{})}aF.extend(aK.prototype,{getName:function(){return this._name},getTips:function(){return this._opts.tips},getLabelText:function(){return this._opts.labelText},getTileLayer:function(){return this._layers[0]},getTileLayers:function(){return this._layers},getTileSize:function(){this._opts.tileSize=256;var T=this._opts.mapInstance;if(T.highResolutionEnabled()&&T.getZoom()<T.config.vectorMapLevel){this._opts.tileSize=128}return this._opts.tileSize},getMinZoom:function(){return this._opts.minZoom},getMaxZoom:function(){return this._opts.maxZoom},getTextColor:function(){return this._opts.textColor},getProjection:function(){return this._opts.projection},getErrorImageUrl:function(){return this._opts.errorImageUrl},getZoomUnits:function(T){var aS=1,aR=this._opts.mapInstance;if(aR.highResolutionEnabled()&&aR.getZoom()<aR.config.vectorMapLevel){aS=2}return Math.pow(2,(18-T))*aS},getZoomFactor:function(T){return this.getZoomUnits(T)*this.getTileSize()}});var t={pd:{host:["http://online0.map.bdimg.com/it/","http://online1.map.bdimg.com/it/","http://online2.map.bdimg.com/it/","http://online3.map.bdimg.com/it/"],params:{fm:42,f:"webapp",format_add:".jpg"}},hd:{host:["http://or1.map.baidu.com:8080/it/","http://or2.map.baidu.com:8080/it/","http://or3.map.baidu.com:8080/it/","http://or4.map.baidu.com:8080/it/"],params:{format:"jpeg",fm:41,quality:70,f:"webapp",format_add:".jpg"}}};var aA=new A();aA.getTilesUrl=function(aR,aX){var aY=aR.x,aT=aR.y,aS,aU;var aV=BMap.TILE_CONFIG||t;if(this.map.highResolutionEnabled()){aS=aV.hd;if(typeof TVC!="undefined"){aU=TVC.webapp.high_normal}}else{aS=aV.pd;if(typeof TVC!="undefined"){aU=TVC.webapp.lower_normal}}var aZ="u=x="+aY+";y="+aT+";z="+aX;if(aU&&aU.version){aZ+=";v="+aU.version}else{aZ+=";v=014"}aZ+=";type=web";var T=aS.host[Math.abs(aY+aT)%aS.host.length]+aZ;if(aU&&aU.updateDate){T+="&udt="+aU.updateDate}for(var aW in aS.params){T+="&"+aW+"="+aS.params[aW]}return T.replace(/-(\d+)/gi,"M$1")};function z(T,aT){this._container=typeof T=="string"?aF.g(T):T;this._opts={linksControl:true,enableDoubleClickZoom:true};aT=aT||{};for(var aR in aT){this._opts[aR]=aT[aR]}this._pov={heading:0,pitch:0};this._links=[];this._id=null;this._position=null;this._zoom=2;this._description="";this._mode="";var aS=this;ao.load("streetview",function(){aS._draw()})}z.MAX_ZOOM=5;z.MIN_ZOOM=0;aF.lang.inherits(z,aF.lang.Class,"StreetView");aF.extend(z.prototype,{getLinks:function(){return this._links},getId:function(){return this._id},getPosition:function(){return this._position},getPov:function(){return this._pov},getZoom:function(){return this._zoom},getDescription:function(){return this._description},getRelevants:function(){return this._relevants||[]},getMode:function(){return this._mode},setId:function(T){if(T==this._id){return}this._lastId=this._id;this._id=T;this._position=null;this._innerId=null},setInnerId:function(T){if(T==this._innerId){return}this._innerId=T;this._id=null;this._position=null},setPosition:function(T){if(T.equals(this._position)){return}this._lastId=this._id;this._position=T;this._id=null;this._innerId=null},setPov:function(T){this._pov=T;if(this._pov.pitch>45){this._pov.pitch=45}if(this._pov.pitch<-10){this._pov.pitch=-10}},setZoom:function(T){if(T==this._zoom){return}if(T>z.MAX_ZOOM){T=z.MAX_ZOOM}if(T<z.MIN_ZOOM){T=z.MIN_ZOOM}if(T!=this._zoom){this._zoom=T}},enableDoubleClickZoom:function(){this._opts.enableDoubleClickZoom=true},disableDoubleClickZoom:function(){this._opts.enableDoubleClickZoom=false},clear:function(){this._data=null;this._id=null;this._position=null;this._links=[];this.dispatchEvent(new av("onclear"))}});function k(){A.call(this)}k.URLS=["http://pcsv0.map.bdimg.com/tile/","http://pcsv1.map.bdimg.com/tile/"];k.prototype=new A();k.prototype.getTilesUrl=function(aT,aS){var T=(aT.x+aT.y)%k.URLS.length;var aR="pl";return k.URLS[T]+"?udt=v&qt=tile&styles="+aR+"&x="+aT.x+"&y="+aT.y+"&z="+aS};function E(T,aR){window.BMap[T]=aR}E("Map",x);E("Hotspot",J);E("MapType",aK);E("Point",f);E("Pixel",aM);E("Size",U);E("Bounds",s);E("TileLayer",A);E("TrafficLayer",aH);E("Overlay",L);E("Marker",D);E("Icon",r);E("Polyline",ah);E("Control",M);E("ScaleControl",O);E("StreetView",z);E("StreetViewCoverageLayer",k);})();module.exports=BMap;});
