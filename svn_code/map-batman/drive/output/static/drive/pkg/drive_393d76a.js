define("drive:widget/navi/navibox.js",function(n,t,i){var o=(n("common:widget/popup/popup.js"),n("common:widget/broadcaster/broadcaster.js"));n("common:static/js/util.js");var a={navurl:"",navOkBox:null,config:{width:276,height:126},main:$("#navOkBox"),showTb:function(n,t){if(n){var i=this,t=t||{};i.navurl=n,$("#navOkBox")[0]&&$("#navOkBox").remove();var o=[];o.push('<div id="navOkBox" class="navokbox">'),o.push('<div class="t"></div>'),o.push('<div  class="c">'),o.push('<div class="t1">'+t.description+"</div><div>"),o.push("<a href="+$.trim(n)+'><button class="bt qd cancel-navokbox" >'+t.leftBtn+"</button></a>"),o.push("<a href="+$.trim(t.naviUrl)+'><button class="bt qd cancel-navokbox" >'+t.rightBtn+"</button></a>"),o.push("</div></div></div>"),$("body").append(o.join("")),i.setPos(),i.bindEvent(t)}},bindEvent:function(n){var t=this;$("button.cancel-navokbox").on("click",function(i){i.preventDefault();var o,a=i.target,s=$.trim($(a).html()),e=$(a).parent().attr("href");"直接网页导航"==s&&"确定"==n.leftBtn?o=1:"直接网页导航"==s&&"确定下载"==n.leftBtn?o=2:"确定"==s?o=3:"确定下载"==s&&(o=4),t.c(t),setTimeout(function(){location.href=e},200)}),o.subscribe("sizechange",function(){setTimeout(function(){t.setPos()},100)})},setPos:function(){var n=(window.innerWidth-this.config.width)/2,t=(window.innerHeight-this.config.height)/2+window.scrollY;$("#navOkBox").css({left:n,top:t,position:"absolute"})},c:function(){$("#navOkBox")[0]&&$("#navOkBox").remove()}};i.exports=a});
;define("drive:widget/navi/navi.js",function(t,n,a){var i=t("drive:widget/navi/navibox.js"),o=t("common:static/js/util.js"),e={bindEvent:function(){$(".gotonav").on("click",$.proxy(this.goTonav,this)),$("a").on("click",$.proxy(this._hideNavBox,this))},_hideNavBox:function(t){var n=t.target,a=$(n).closest("a");url=a.attr("href"),t.preventDefault(),url&&""!=url&&($("#navOkBox").hide(),window.location.href=url)},goTonav:function(){var t=this,n={},a="http://daohang.map.baidu.com/mobile/#navi/naving/"+o.jsonToQuery(window._APP_NAVI_QUERY)+"/vt=map&state=entry";if(o.isAndroid()){var e=!1;o.getNativeInfo("com.baidu.BaiduMap",function(o){if(0==o.error&&e===!1){e=!0;var r=t.getLLpoint(window._APP_NAVI_QUERY.start),l=t.getLLpoint(window._APP_NAVI_QUERY.endp),s="bdapp://map/direction?origin="+r+"&destination="+l+"&mode=navigation";return n.description="检测到您已安装百度地图，是否打开百度地图导航？",n.leftBtn="确定",n.rightBtn="直接网页导航",n.naviUrl=a,i.showTb(s,n),void 0}},function(){}),setTimeout(function(){0==e&&(e=!0,url="http://mo.baidu.com/d/map/1321/bmap_andr_1321.apk",t._showNavBox(url,a))},1e3)}else o.isIPhone()||o.isIPod()?(url="http://itunes.apple.com/cn/app/id452186370?ls=1&mt=8",this._showNavBox(url,a)):o.isIPad()?(url="https://itunes.apple.com/cn/app/bai-du-de-tuhd/id553771681?ls=1&mt=8",this._showNavBox(url,a)):(url="http://mo.baidu.com/d/map/1321/bmap_andr_1321.apk",t._showNavBox(url,a))},_showNavBox:function(t,n){var a={};a.description="下载百度地图，免费导航，精准专业！",a.leftBtn="确定下载",a.rightBtn=" 直接网页导航",a.naviUrl=n,i.showTb(t,a)},getLLpoint:function(t){var n=t.split(","),a={lng:n[0],lat:n[1]},i=this.convertMC2LL(a),i=i.lat+","+i.lng;return i},convertMC2LL:function(t){function n(t,n){if(t&&n){var a=n[0]+n[1]*Math.abs(t.lng),i=Math.abs(t.lat)/n[9],o=n[2]+n[3]*i+n[4]*i*i+n[5]*i*i*i+n[6]*i*i*i*i+n[7]*i*i*i*i*i+n[8]*i*i*i*i*i*i;return a*=t.lng<0?-1:1,o*=t.lat<0?-1:1,{lng:a,lat:o}}}var a,i;a={lng:Math.abs(t.lng),lat:Math.abs(t.lat)};for(var o=0;o<[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0].length;o++)if(a.lat>=[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0][o]){i=[[1.410526172116255e-8,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,17337981.2],[-7.435856389565537e-9,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,10260144.86],[-3.030883460898826e-8,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,6856817.37],[-1.981981304930552e-8,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,4482777.06],[3.09191371068437e-9,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,2555164.4],[2.890871144776878e-9,8983055095805407e-21,-3.068298e-8,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]][o];break}var e=n(t,i),t={lng:e.lng.toFixed(6),lat:e.lat.toFixed(6)};return t}};a.exports=e});