define("place:static/js/broadcastname.js",function(e,t,a){a.exports={DATEPICKER_DATE_CHANGE:"datepickerdatechange",HOTELBOOK_OR_THIRDSRCOTA_SHOW:"hotelbookorthirdsrcotashow"}});
;define("place:static/js/vcode.js",function(e,t,n){var c,o;o={},c=function(e){var t=this;t.option=$.extend({},o,e),t.el=$(t.option.el),t.render(),t.refreshVcode()},c.Const={},c.Const.U_GET_VCODE="http://map.baidu.com/maps/services/captcha?cb=?",c.Const.U_GET_IMAGE="http://map.baidu.com/maps/services/captcha/image",c.Const.T_VCODE='<input type="hidden" name="vcode" value="" /><img title="点击更换验证码" width="100" height="30"  id="VerifyCodeImg" class="codeimg"  src="http://map.baidu.com/img/transparent.gif" /><a id="changeVerifyCode" href="javascript:void(0);" class="changecode">换一张</a>',$.extend(c.prototype,{render:function(){var e=this;e.el.prepend($(c.Const.T_VCODE)),e.el.find("#changeVerifyCode").click(function(){e.refreshVcode()})},setVcode:function(e){var t=this;t.el.find("input[name=vcode]").val(e),t.vcode=e},refreshVcode:function(){var e=this;e.el.find(".vcode-img").prop("src","http://map.baidu.com/img/transparent.gif"),$.ajax({url:c.Const.U_GET_VCODE+"&t="+ +new Date,dataType:"jsonp",jsonp:"cb",success:function(t){var n;(n=t.content.vcode)&&(e.setVcode(n),e.getImage(n))}})},getImage:function(e){this.el.find(".codeimg").prop("src",c.Const.U_GET_IMAGE+"?vcode="+e)},getData:function(){var e=this;return{vcode:e.vcode,code:e.el.find("input[name=code]").val()}}}),n.exports=c});
;define("place:static/lib/mapresize.js",function(e,i,n){var t=e("common:static/js/util.js"),r={h:0,w:0,tm:1e3,interval:null,ua:navigator.userAgent.toLowerCase(),init:function(){this.startMgr()},startMgr:function(){"undefined"!=typeof window.onorientationchange?window.addEventListener("orientationchange",this.resize,!1):window.addEventListener("resize",this.resize,!1),t.isAndroid()&&window.addEventListener("resize",this.resize,!1)},endMgr:function(){clearInterval(this.interval),this.interval=null},resize:function(){}};n.exports=r});
;define("place:static/lib/template.js",function(){window.baidu=window.baidu||{},baidu.template=baidu.template||{},baidu.template._encodeHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\\/g,"&#92;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},baidu.template._encodeEventHTML=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/\\\\/g,"\\").replace(/\\\//g,"/").replace(/\\n/g,"\n").replace(/\\r/g,"\r")}});
;define("place:static/lib/underscore.js",function(n,t,r){(function(){var n=this,e=n._,u={},i=Array.prototype,a=Object.prototype,o=Function.prototype,c=i.push,l=i.slice,f=i.concat,s=a.toString,p=a.hasOwnProperty,v=i.forEach,h=i.map,d=i.reduce,g=i.reduceRight,m=i.filter,y=i.every,b=i.some,_=i.indexOf,w=i.lastIndexOf,x=Array.isArray,j=Object.keys,A=o.bind,E=function(n){return n instanceof E?n:this instanceof E?(this._wrapped=n,void 0):new E(n)};"undefined"!=typeof t?("undefined"!=typeof r&&r.exports&&(t=r.exports=E),t._=E):n._=E,E.VERSION="1.5.1";var O=E.each=E.forEach=function(n,t,r){if(null!=n)if(v&&n.forEach===v)n.forEach(t,r);else if(n.length===+n.length){for(var e=0,i=n.length;i>e;e++)if(t.call(r,n[e],e,n)===u)return}else for(var a in n)if(E.has(n,a)&&t.call(r,n[a],a,n)===u)return};E.map=E.collect=function(n,t,r){var e=[];return null==n?e:h&&n.map===h?n.map(t,r):(O(n,function(n,u,i){e.push(t.call(r,n,u,i))}),e)};var F="Reduce of empty array with no initial value";E.reduce=E.foldl=E.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),d&&n.reduce===d)return e&&(t=E.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(O(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError(F);return r},E.reduceRight=E.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),g&&n.reduceRight===g)return e&&(t=E.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=n.length;if(i!==+i){var a=E.keys(n);i=a.length}if(O(n,function(o,c,l){c=a?a[--i]:--i,u?r=t.call(e,r,n[c],c,l):(r=n[c],u=!0)}),!u)throw new TypeError(F);return r},E.find=E.detect=function(n,t,r){var e;return k(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},E.filter=E.select=function(n,t,r){var e=[];return null==n?e:m&&n.filter===m?n.filter(t,r):(O(n,function(n,u,i){t.call(r,n,u,i)&&e.push(n)}),e)},E.reject=function(n,t,r){return E.filter(n,function(n,e,u){return!t.call(r,n,e,u)},r)},E.every=E.all=function(n,t,r){t||(t=E.identity);var e=!0;return null==n?e:y&&n.every===y?n.every(t,r):(O(n,function(n,i,a){return(e=e&&t.call(r,n,i,a))?void 0:u}),!!e)};var k=E.some=E.any=function(n,t,r){t||(t=E.identity);var e=!1;return null==n?e:b&&n.some===b?n.some(t,r):(O(n,function(n,i,a){return e||(e=t.call(r,n,i,a))?u:void 0}),!!e)};E.contains=E.include=function(n,t){return null==n?!1:_&&n.indexOf===_?-1!=n.indexOf(t):k(n,function(n){return n===t})},E.invoke=function(n,t){var r=l.call(arguments,2),e=E.isFunction(t);return E.map(n,function(n){return(e?t:n[t]).apply(n,r)})},E.pluck=function(n,t){return E.map(n,function(n){return n[t]})},E.where=function(n,t,r){return E.isEmpty(t)?r?void 0:[]:E[r?"find":"filter"](n,function(n){for(var r in t)if(t[r]!==n[r])return!1;return!0})},E.findWhere=function(n,t){return E.where(n,t,!0)},E.max=function(n,t,r){if(!t&&E.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.max.apply(Math,n);if(!t&&E.isEmpty(n))return-1/0;var e={computed:-1/0,value:-1/0};return O(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a>e.computed&&(e={value:n,computed:a})}),e.value},E.min=function(n,t,r){if(!t&&E.isArray(n)&&n[0]===+n[0]&&n.length<65535)return Math.min.apply(Math,n);if(!t&&E.isEmpty(n))return 1/0;var e={computed:1/0,value:1/0};return O(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a<e.computed&&(e={value:n,computed:a})}),e.value},E.shuffle=function(n){var t,r=0,e=[];return O(n,function(n){t=E.random(r++),e[r-1]=e[t],e[t]=n}),e};var R=function(n){return E.isFunction(n)?n:function(t){return t[n]}};E.sortBy=function(n,t,r){var e=R(t);return E.pluck(E.map(n,function(n,t,u){return{value:n,index:t,criteria:e.call(r,n,t,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(e>r||void 0===e)return-1}return n.index<t.index?-1:1}),"value")};var M=function(n,t,r,e){var u={},i=R(null==t?E.identity:t);return O(n,function(t,a){var o=i.call(r,t,a,n);e(u,o,t)}),u};E.groupBy=function(n,t,r){return M(n,t,r,function(n,t,r){(E.has(n,t)?n[t]:n[t]=[]).push(r)})},E.countBy=function(n,t,r){return M(n,t,r,function(n,t){E.has(n,t)||(n[t]=0),n[t]++})},E.sortedIndex=function(n,t,r,e){r=null==r?E.identity:R(r);for(var u=r.call(e,t),i=0,a=n.length;a>i;){var o=i+a>>>1;r.call(e,n[o])<u?i=o+1:a=o}return i},E.toArray=function(n){return n?E.isArray(n)?l.call(n):n.length===+n.length?E.map(n,E.identity):E.values(n):[]},E.size=function(n){return null==n?0:n.length===+n.length?n.length:E.keys(n).length},E.first=E.head=E.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:l.call(n,0,t)},E.initial=function(n,t,r){return l.call(n,0,n.length-(null==t||r?1:t))},E.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:l.call(n,Math.max(n.length-t,0))},E.rest=E.tail=E.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},E.compact=function(n){return E.filter(n,E.identity)};var S=function(n,t,r){return t&&E.every(n,E.isArray)?f.apply(r,n):(O(n,function(n){E.isArray(n)||E.isArguments(n)?t?c.apply(r,n):S(n,t,r):r.push(n)}),r)};E.flatten=function(n,t){return S(n,t,[])},E.without=function(n){return E.difference(n,l.call(arguments,1))},E.uniq=E.unique=function(n,t,r,e){E.isFunction(t)&&(e=r,r=t,t=!1);var u=r?E.map(n,r,e):n,i=[],a=[];return O(u,function(r,e){(t?e&&a[a.length-1]===r:E.contains(a,r))||(a.push(r),i.push(n[e]))}),i},E.union=function(){return E.uniq(E.flatten(arguments,!0))},E.intersection=function(n){var t=l.call(arguments,1);return E.filter(E.uniq(n),function(n){return E.every(t,function(t){return E.indexOf(t,n)>=0})})},E.difference=function(n){var t=f.apply(i,l.call(arguments,1));return E.filter(n,function(n){return!E.contains(t,n)})},E.zip=function(){for(var n=E.max(E.pluck(arguments,"length").concat(0)),t=new Array(n),r=0;n>r;r++)t[r]=E.pluck(arguments,""+r);return t},E.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},E.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=E.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}if(_&&n.indexOf===_)return n.indexOf(t,r);for(;u>e;e++)if(n[e]===t)return e;return-1},E.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=null!=r;if(w&&n.lastIndexOf===w)return e?n.lastIndexOf(t,r):n.lastIndexOf(t);for(var u=e?r:n.length;u--;)if(n[u]===t)return u;return-1},E.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=new Array(e);e>u;)i[u++]=n,n+=r;return i};var I=function(){};E.bind=function(n,t){var r,e;if(A&&n.bind===A)return A.apply(n,l.call(arguments,1));if(!E.isFunction(n))throw new TypeError;return r=l.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(l.call(arguments)));I.prototype=n.prototype;var u=new I;I.prototype=null;var i=n.apply(u,r.concat(l.call(arguments)));return Object(i)===i?i:u}},E.partial=function(n){var t=l.call(arguments,1);return function(){return n.apply(this,t.concat(l.call(arguments)))}},E.bindAll=function(n){var t=l.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return O(t,function(t){n[t]=E.bind(n[t],n)}),n},E.memoize=function(n,t){var r={};return t||(t=E.identity),function(){var e=t.apply(this,arguments);return E.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},E.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},E.defer=function(n){return E.delay.apply(E,[n,1].concat(l.call(arguments,1)))},E.throttle=function(n,t,r){var e,u,i,a=null,o=0;r||(r={});var c=function(){o=r.leading===!1?0:new Date,a=null,i=n.apply(e,u)};return function(){var l=new Date;o||r.leading!==!1||(o=l);var f=t-(l-o);return e=this,u=arguments,0>=f?(clearTimeout(a),a=null,o=l,i=n.apply(e,u)):a||r.trailing===!1||(a=setTimeout(c,f)),i}},E.debounce=function(n,t,r){var e,u=null;return function(){var i=this,a=arguments,o=function(){u=null,r||(e=n.apply(i,a))},c=r&&!u;return clearTimeout(u),u=setTimeout(o,t),c&&(e=n.apply(i,a)),e}},E.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments),n=null,t)}},E.wrap=function(n,t){return function(){var r=[n];return c.apply(r,arguments),t.apply(this,r)}},E.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},E.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},E.keys=j||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var r in n)E.has(n,r)&&t.push(r);return t},E.values=function(n){var t=[];for(var r in n)E.has(n,r)&&t.push(n[r]);return t},E.pairs=function(n){var t=[];for(var r in n)E.has(n,r)&&t.push([r,n[r]]);return t},E.invert=function(n){var t={};for(var r in n)E.has(n,r)&&(t[n[r]]=r);return t},E.functions=E.methods=function(n){var t=[];for(var r in n)E.isFunction(n[r])&&t.push(r);return t.sort()},E.extend=function(n){return O(l.call(arguments,1),function(t){if(t)for(var r in t)n[r]=t[r]}),n},E.pick=function(n){var t={},r=f.apply(i,l.call(arguments,1));return O(r,function(r){r in n&&(t[r]=n[r])}),t},E.omit=function(n){var t={},r=f.apply(i,l.call(arguments,1));for(var e in n)E.contains(r,e)||(t[e]=n[e]);return t},E.defaults=function(n){return O(l.call(arguments,1),function(t){if(t)for(var r in t)void 0===n[r]&&(n[r]=t[r])}),n},E.clone=function(n){return E.isObject(n)?E.isArray(n)?n.slice():E.extend({},n):n},E.tap=function(n,t){return t(n),n};var T=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof E&&(n=n._wrapped),t instanceof E&&(t=t._wrapped);var u=s.call(n);if(u!=s.call(t))return!1;switch(u){case"[object String]":return n==String(t);case"[object Number]":return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case"[object Date]":case"[object Boolean]":return+n==+t;case"[object RegExp]":return n.source==t.source&&n.global==t.global&&n.multiline==t.multiline&&n.ignoreCase==t.ignoreCase}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]==n)return e[i]==t;var a=n.constructor,o=t.constructor;if(a!==o&&!(E.isFunction(a)&&a instanceof a&&E.isFunction(o)&&o instanceof o))return!1;r.push(n),e.push(t);var c=0,l=!0;if("[object Array]"==u){if(c=n.length,l=c==t.length)for(;c--&&(l=T(n[c],t[c],r,e)););}else{for(var f in n)if(E.has(n,f)&&(c++,!(l=E.has(t,f)&&T(n[f],t[f],r,e))))break;if(l){for(f in t)if(E.has(t,f)&&!c--)break;l=!c}}return r.pop(),e.pop(),l};E.isEqual=function(n,t){return T(n,t,[],[])},E.isEmpty=function(n){if(null==n)return!0;if(E.isArray(n)||E.isString(n))return 0===n.length;for(var t in n)if(E.has(n,t))return!1;return!0},E.isElement=function(n){return!(!n||1!==n.nodeType)},E.isArray=x||function(n){return"[object Array]"==s.call(n)},E.isObject=function(n){return n===Object(n)},O(["Arguments","Function","String","Number","Date","RegExp"],function(n){E["is"+n]=function(t){return s.call(t)=="[object "+n+"]"}}),E.isArguments(arguments)||(E.isArguments=function(n){return!(!n||!E.has(n,"callee"))}),"function"!=typeof/./&&(E.isFunction=function(n){return"function"==typeof n}),E.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},E.isNaN=function(n){return E.isNumber(n)&&n!=+n},E.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==s.call(n)},E.isNull=function(n){return null===n},E.isUndefined=function(n){return void 0===n},E.has=function(n,t){return p.call(n,t)},E.noConflict=function(){return n._=e,this},E.identity=function(n){return n},E.times=function(n,t,r){for(var e=Array(Math.max(0,n)),u=0;n>u;u++)e[u]=t.call(r,u);return e},E.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))};var N={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};N.unescape=E.invert(N.escape);var q={escape:new RegExp("["+E.keys(N.escape).join("")+"]","g"),unescape:new RegExp("("+E.keys(N.unescape).join("|")+")","g")};E.each(["escape","unescape"],function(n){E[n]=function(t){return null==t?"":(""+t).replace(q[n],function(t){return N[n][t]})}}),E.result=function(n,t){if(null==n)return void 0;var r=n[t];return E.isFunction(r)?r.call(n):r},E.mixin=function(n){O(E.functions(n),function(t){var r=E[t]=n[t];E.prototype[t]=function(){var n=[this._wrapped];return c.apply(n,arguments),P.call(this,r.apply(E,n))}})};var B=0;E.uniqueId=function(n){var t=++B+"";return n?n+t:t},E.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var D=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},C=/\\|'|\r|\n|\t|\u2028|\u2029/g;E.template=function(n,t,r){var e;r=E.defaults({},r,E.templateSettings);var u=new RegExp([(r.escape||D).source,(r.interpolate||D).source,(r.evaluate||D).source].join("|")+"|$","g"),i=0,a="__p+='";n.replace(u,function(t,r,e,u,o){return a+=n.slice(i,o).replace(C,function(n){return"\\"+z[n]}),r&&(a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'"),e&&(a+="'+\n((__t=("+e+"))==null?'':__t)+\n'"),u&&(a+="';\n"+u+"\n__p+='"),i=o+t.length,t}),a+="';\n",r.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{e=new Function(r.variable||"obj","_",a)}catch(o){throw o.source=a,o}if(t)return e(t,E);var c=function(n){return e.call(this,n,E)};return c.source="function("+(r.variable||"obj")+"){\n"+a+"}",c},E.chain=function(n){return E(n).chain()};var P=function(n){return this._chain?E(n).chain():n};E.mixin(E),O(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=i[n];E.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!=n&&"splice"!=n||0!==r.length||delete r[0],P.call(this,r)}}),O(["concat","join","slice"],function(n){var t=i[n];E.prototype[n]=function(){return P.call(this,t.apply(this._wrapped,arguments))}}),E.extend(E.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(window)});
;define("place:widget/bdcomment/bdcomment.js",function(e,t,o){var n=e("common:static/js/util.js");o.exports={startIndex:0,$select:$("#J_commentSelect"),init:function(){var e=this;e.$select.on("change",$.proxy(e.loadMore,e)),$(".comment-loadmore").on("click",function(){e.loadMore(!0)})},loadMore:function(e){var t,o=this,a=o.$select,c=0,d=5;e&&(c=++o.startIndex,d=10),t=n.jsonToUrl({uid:a.data("uid"),startIndex:c,maxResults:d,orderBy:a.val()}),BigPipe.asyncLoad({id:"place-pagelet-bdcomment"},t)}}});
;define("place:widget/bookphone/bookphone.js",function(t,o,i){function e(){"use strict";s.on("click",a)}function a(t){var o=$(t.target).closest("a");n.isAndroid()&&(o.attr("href","javascript:void(0)"),n.TelBox.showTb(o.attr("data-tel"))),t.stopPropagation(),t.stopImmediatePropagation()}var n=t("common:static/js/util.js"),s=$(".place-widget-bookphone");i.exports={init:function(){"use strict";e()}}});
;define("place:widget/captain/captain.js",function(){$(".place-widget-captain")});
;define("place:widget/commentbtn/commentbtn.js",function(t,n,o){var c=t("common:widget/login/login.js");t("common:widget/stat/stat.js"),o.exports={init:function(){$("#J_commentBtn").on("click",$.proxy(this.commentAction,this))},commentAction:function(t){t.preventDefault(),c.checkLogin(function(n){n.status?location.href=$(t.target).closest("a").prop("href"):c.loginAction()})}}});
;define("place:widget/datepicker/datepicker.js",function(e){"use strict";function t(){var t=(e("common:widget/datepicker/datepicker.js"),new Date),k=new Date(t.getTime()+864e5);r=g.find(".sd"),c=g.find(".ed"),s=g.find(".sd-wrapper"),n=g.find(".ed-wrapper"),o=g.find(".sd-picker"),p=g.find(".ed-picker"),r.text(t.format("yyyy-MM-dd")),c.text(k.format("yyyy-MM-dd")),o.datepicker({date:t,minDate:t,valuecommit:function(e,t,a){var s,n;r.text(a),s=$.datepicker.parseDate(c.text()),i(t,s)>=0&&(n=new Date(t.getTime()+864e5),c.text(n.format("yyyy-MM-dd")),p.datepicker("date",n)),p.datepicker("minDate",new Date(t.getTime()+864e5)).datepicker("refresh"),d("start"),m.broadcast(f.DATEPICKER_DATE_CHANGE,{sd:r.text(),ed:c.text()})}}),p.datepicker({date:k,minDate:k,valuecommit:function(e,t,a){var s,n;c.text(a),s=$.datepicker.parseDate(r.text()),i(t,s)<=0&&(n=new Date(t.getTime()-864e5),r.text(n.format("yyyy-MM-dd")),o.datepicker("date",n).datepicker("refresh")),d("end"),m.broadcast(f.DATEPICKER_DATE_CHANGE,{sd:r.text(),ed:c.text()})}}),r.on("click",a),c.on("click",a),g.show()}function a(e){var t=e.currentTarget.className;"sd"===t?(d("end"),s.toggle(),r.parents(".date").toggleClass("active")):(d("start"),n.toggle(),c.parents(".date").toggleClass("active")),e.stopPropagation(),e.stopImmediatePropagation()}function d(e){switch(e){case"start":s.hide(),r.parents(".date").removeClass("active");break;case"end":n.hide(),c.parents(".date").removeClass("active")}}function i(e,t){return e.getTime()-t.getTime()}var r,c,s,n,o,p,m=e("common:widget/broadcaster/broadcaster.js"),f=e("place:static/js/broadcastname.js"),g=$(".place-widget-datepicker");m.subscribe(f.HOTELBOOK_OR_THIRDSRCOTA_SHOW,function(){"none"===g.css("display")&&t()})});
;define("place:widget/dishcategory/dishcategory.js",function(e){var i=(e("common:static/js/util.js"),e("place:static/lib/mapresize.js")),a=e("common:static/js/iscroll.js");$(function(){function e(e){var i=e.target,a=i.id;if(a){var c=$("#dishCategory_"+a).offset();window.scroll(0,c.top)}$("#place-widget-dish-category").hide()}$("#place-widget-dish-category").show();var c=new a($("#place-widget-dish-category .ddl_wrapper div").get(0),{hScroll:!1,hScrollbar:!1,vScroll:!0,vScrollbar:!0,handleClick:!1}),t=i.h||320;t-=160,t=Math.min(Math.max(120,t),360),$("#place-widget-dish-category .ddl_wrapper .ul_scroll").css({maxHeight:t}),c.refresh(),$("#place-widget-dish-category").on("click",e),$("#place-widget-dish-category").hide()})});
;define("place:widget/gotomovie/gotomovie.js",function(t,a,o){"use strict";function i(){d.on("click",e)}function e(t){var a=$(".common-widget-nav .title span").text(),o=$(".place-widget-captain").find(".name").text();s.addStat(STAT_CODE.PLACE_DETAIL_TELEPHONE_CLICK,{wd:a,name:o});var i=$(t.target).closest("a");n.isAndroid()&&(i.attr("href","javascript:void(0)"),n.TelBox.showTb(i.attr("data-tel"))),t.stopPropagation(),t.stopImmediatePropagation()}var n=t("common:static/js/util.js"),s=t("common:widget/stat/stat.js"),d=$("#detail-phone");s.addStat(STAT_CODE.PLACE_DETAIL_TELEPHONE_SHOW),o.exports={init:function(){i()}}});
;define("place:widget/groupon/groupon.js",function(a,e,o){function t(a){"use strict";var e=$(a.target).closest("ul").attr("url"),o=$(".place-widget-groupon-site").text();r.addStat(STAT_CODE.PLACE_GROUPON_CLICK,{wd:s.wd,name:s.name,dest:o,srcname:s.srcname}),window.open(e),a.stopPropagation(),a.stopImmediatePropagation()}function i(a){var e=c.html()-0;d.hasClass("place-widget-groupon-disable")&&d.removeClass("place-widget-groupon-disable"),l.hasClass("place-widget-groupon-disable")||(d.on("click",n),p.hide(),p.eq(e-2).show(),c.html(e-1),0==e-2&&(l.addClass("place-widget-groupon-disable"),l.off("click",i))),a.stopPropagation(),a.stopImmediatePropagation()}function n(a){var e=c.html()-0,o=g.html()-0;l.hasClass("place-widget-groupon-disable")&&l.removeClass("place-widget-groupon-disable"),d.hasClass("place-widget-groupon-disable")||(l.on("click",i),p.hide(),p.eq(e).show(),c.html(e+1),e+1==o&&(d.addClass("place-widget-groupon-disable"),d.off("click",n))),a.stopPropagation(),a.stopImmediatePropagation()}var s,p=$(".place-widget-groupon-main"),l=$(".place-widget-groupon-pagenum-prev"),d=$(".place-widget-groupon-pagenum-next"),c=$(".place-widget-groupon-curpage"),g=$(".place-widget-groupon-totalpage"),r=a("common:widget/stat/stat.js");o.exports={init:function(a){"use strict";var e=g.html()-0;s=a||{},p.on("click",t),e>1&&(l.on("click",i),d.on("click",n)),r.addStat(STAT_CODE.PLACE_GROUPON_VIEW,{wd:s.wd,name:s.name,srcname:s.srcname})}}});
;define("place:widget/hotelbook/hotelbook.js",function(t,o,i){"use strict";var s=t("common:widget/broadcaster/broadcaster.js"),a=t("place:static/js/broadcastname.js"),e=t("common:static/js/util.js"),h=t("common:widget/geolocation/location.js"),n=t("common:widget/popup/popup.js"),l=t("common:widget/stat/stat.js");i.exports={create:function(){var t=this.$el=$(".place-widget-hotel-book");this.serverAddr="http://"+location.host+"/mobile/webapp/place/hotelbook/async=1&qt=",this.$showAllRoom=t.find(".show-all-room"),this.$showAllOta=t.find(".show-all-ota"),this.$hbMain=t.find(".main"),this.$roomsWp=t.find(".rooms"),this.$rooms=t.find(".room-list > li"),this.$roomsHide=t.find(".room-list > li").slice(3),this.$otasHide=t.find(".ota-list > li").slice(3),this.$otaResult=t.find(".ota-result"),this.$fetchFailed=t.find(".ota-failed"),this.$bookBtn=t.find(".ota-bookbtn"),this.uid=$("#uid").html(),this.isShowAllRoom=!1,this.isShowAllOta=!1,this.isShowOta=!0,this.lastIndex="0",this.currentIndex="0",s.subscribe(a.DATEPICKER_DATE_CHANGE,$.proxy(this.onDatepickerDateChange,this)),s.broadcast(a.HOTELBOOK_OR_THIRDSRCOTA_SHOW)},onDatepickerDateChange:function(t){if(t.sd!==this.sd||t.ed!==this.ed){this.sd=t.sd,this.ed=t.ed;var o={st:t.sd,et:t.ed,uid:this.uid};BigPipe.asyncLoad({id:"place-pagelet-hotelbook"},e.jsonToUrl(o))}},bindEvents:function(){this.bindRoomListEvents()},bindRoomListEvents:function(){this.$showAllRoom.on("click",$.proxy(this.showAllRoom,this)),this.$showAllOta.on("click",$.proxy(this.showAllOta,this)),this.$rooms.on("click",$.proxy(this.fetchOtas,this)),this.$bookBtn.on("click",$.proxy(this.goToBook,this))},unbindEvents:function(){this.unbindRoomListEvents()},unbindRoomListEvents:function(){this.$showAllRoom.off("click",$.proxy(this.showAllRoom,this)),this.$showAllOta.off("click",$.proxy(this.showAllOta,this)),this.$rooms.off("click",$.proxy(this.fetchOtas,this)),this.$bookBtn.off("click",$.proxy(this.goToBook,this))},showAllRoom:function(t){this.isShowAllRoom?(this.lastIndex>2&&(this.$otaResult=this.$el.find(".ota-result"),this.$otaResult.remove(),this.$el.find(".arrow-icon-open").attr("class","arrow-icon"),this.isShowOta=!1,this.isShowAllOta=!1),this.$showAllRoom.find("span").eq(0).html("查看其他房型"),this.isShowAllRoom=!1):(this.$showAllRoom.find("span").eq(0).html("收起其他房型"),this.isShowAllRoom=!0),this.$roomsHide.toggle(),this.$showAllRoom.toggleClass("show-all-room-open"),t.stopPropagation(),t.stopImmediatePropagation()},showAllOta:function(t){this.isShowAllOta?(this.$showAllOta.find("span").eq(0).html("展开其他报价"),this.isShowAllOta=!1):(this.$showAllOta.find("span").eq(0).html("收起其他报价"),this.isShowAllOta=!0),this.$otasHide.toggle(),this.$showAllOta.toggleClass("show-all-ota-open"),t.stopPropagation(),t.stopImmediatePropagation()},fetchOtas:function(t){var o,i,s=this.$el,a=_APP_HASH.action,e=$(t.target).closest("li").find("span").eq(1).text(),h={};"detail"===a?l.addStat(STAT_CODE.PLACE_HOTEL_DETAIL_ROOM_CLICK,{name:this.poiname,type:e}):"hotelbook"===a&&l.addStat(STAT_CODE.PLACE_HOTEL_BOOK_ROOM_CLICK,{name:this.poiname,type:e}),this.$targetRoom=$(t.target).closest("li"),this.currentIndex=this.$targetRoom.attr("index"),this.isShowOta&&this.currentIndex==this.lastIndex?(this.$otaResult=s.find(".ota-result"),this.$otaResult.remove(),this.$targetRoom.find("span").eq(0).attr("class","arrow-icon"),this.isShowOta=!1):(this.unbindEvents(),this.$otaResult=s.find(".ota-result"),this.$otaResult.remove(),this.$fetchFailed=s.find(".ota-failed"),this.$fetchFailed.remove(),this.$targetRoom.find("span").eq(0).attr("class","arrow-icon-open"),i='<div class="ota-fetching"><span></span><span>正在获取实时精准报价数据...</span></div>',this.$targetRoom.after(i),o=this.$targetRoom.attr("ota_price_url"),h={type:"POST",url:this.serverAddr+"fetchotas",data:{uid:this.uid,otaPriceUrl:o},dataType:"html"},this.fetchData(h,$.proxy(this.doFetchOtaSuccess,this),$.proxy(this.doFetchOtaError,this)),this.isShowOta=!0,this.lastIndex=this.$targetRoom.attr("index")),this.$bookBtn.off("click",this.goToBook),t.stopPropagation(),t.stopImmediatePropagation()},fetchData:function(t,o,i){$.ajax({type:t.type,url:t.url,data:t.data,dataType:t.dataType,success:function(t){o(t)},error:function(t,o){i(t,o)}})},doFetchOtaSuccess:function(t){this.$targetRoom.next().remove(),this.$showAllOta.off("click",$.proxy(this.showAllOta,this)),this.$el.find(".arrow-icon-open").attr("class","arrow-icon"),this.$targetRoom.after(t),this.$targetRoom.find("span").eq(0).attr("class","arrow-icon-open"),this.$showAllOta=this.$el.find(".show-all-ota"),this.$otasHide=this.$el.find(".ota-list > li").slice(3),this.$bookBtn=this.$el.find(".ota-bookbtn"),this.bindEvents()},doFetchOtaError:function(){this.bindEvents()},doFetchRoomSuccess:function(t){var o=this.$el;this.unbindRoomListEvents(),this.$hbMain.append(t),this.$showAllRoom=o.find(".show-all-room"),this.$showAllOta=o.find(".show-all-ota"),this.$rooms=o.find(".room-list > li"),this.$roomsHide=o.find(".room-list > li").slice(3),this.$otasHide=o.find(".ota-list > li").slice(3),this.$roomsWp=o.find(".rooms"),this.$bookBtn=o.find(".ota-bookbtn"),this.$bookBtn.on("click",goToBook),this.bindEvents(),this.isShowAllRoom=!1,this.isShowOta=!0,this.isShowAllOta=!1},doFetchRoomError:function(){this.bindEvents()},goToBook:function(t){var o,i,s=$(t.target),a=_APP_HASH.action,d=s.data("url"),r=s.closest("li").find("span").eq(1).text(),c=s.parent().find(".ota-name").text(),m=(new Date).format("yyyy-MM-dd"),p=new Date((new Date).getTime()+864e5).format("yyyy-MM-dd"),f=parseInt(s.data("price"),10),O=parseInt(s.data("bonus"),10)||0;s.hasClass("ota-bookbtn-web")?("detail"===a?(o=$(".place-widget-captain .name").text(),l.addStat(STAT_CODE.PLACE_HOTEL_DETAIL_BOOKBTN_PC_CLICK,{name:this.poiname,type:r,ota:c})):"hotelbook"===a&&l.addStat(STAT_CODE.PLACE_HOTEL_BOOK_BOOKBTN_PC_CLICK,{name:this.poiname,type:r,ota:c}),n.open({text:"您好，此酒店报价需要在电脑端登陆：map.baidu.com，在酒店版块中进行搜索预订",autoCloseTime:3e3})):s.hasClass("ota-bookbtn-tel")?("detail"===a?l.addStat(STAT_CODE.PLACE_HOTEL_DETAIL_BOOKBTN_TEL_CLICK,{name:this.poiname,type:r,ota:c}):"hotelbook"===a&&l.addStat(STAT_CODE.PLACE_HOTEL_BOOK_BOOKBTN_TEL_CLICK,{name:this.poiname,type:r,ota:c}),e.isAndroid()&&(s.attr("href","javascript:void(0)"),e.TelBox.showTb(s.attr("phone")))):(i={from_page:a,checkin_date:this.sd||m,checkout_date:this.ed||p,c:h.getCityCode(),price:f,book_price:f-O,simple:1},window.open(d+"&"+e.jsonToQuery(i),"_blank")),t.stopPropagation(),t.stopImmediatePropagation()},refreshPage:function(){this.$roomsWp.remove(),this.isShowOta=!0,this.isShowAllRoom=!1,this.isShowAllOta=!1;var t={type:"POST",url:this.serverAddr+"fetchrooms",data:{uid:this.uid,st:this.sd,et:this.ed},dataType:"html"};this.fetchData(t,$.proxy(this.doFetchRoomSuccess,this),$.proxy(this.doFetchRoomError,this))},init:function(){var t=_APP_HASH.action;this.create(),"detail"===t?this.poiname=$(".place-widget-captain .name").text():"hotelbook"===t&&(this.poiname=$(".place-widget-hotel-info p").eq(0).text()),"detail"===t&&l.addStat(STAT_CODE.PLACE_HOTEL_BOOKABLE_DETAIL_VIEW,{name:this.poiname}),this.bindEvents()}}});
;define("place:widget/icomment/icomment.js",function(t,o,e){var s=t("common:widget/login/login.js"),n=t("common:widget/popup/popup.js"),i=t("common:widget/stat/stat.js");e.exports={msg:{netError:"发送失败请检查网络连接后重试",nocontentError:"评论内容不能为空"},$form:$("#J_addComment"),$scores:$("#J_impression li"),init:function(){this.$scores.on("click",$.proxy(this.switchScores,this)),$("#J_submitComment").on("click",$.proxy(this.submitComment,this))},switchScores:function(t){var o;(o=$(t.target).closest("li"))&&(this.$scores.removeClass("active"),o.addClass("active"))},submitComment:function(){var t=this,o=t._getContent(),e=t._getScore(),n=t.msg;i.addStat(STAT_CODE.PLACE_COMMENT_ICOMMENT_SUBMITCLICK),s.checkLogin(function(i){i.status?e&&o?$.ajax({type:"post",url:"/mobile/webapp/place/icomment/force=simple",data:{uid:t.$form.data("uid"),content:o,score:e},dataType:"json",success:function(o){t._addCommentSuccess(o)},error:function(){t.showMessage(n.netError)}}):t.showMessage(n.nocontentError):s.loginAction()})},_getScore:function(){return this.$form.find(".active").attr("value")},_getContent:function(){return $("#J_commentContent").val()},_addCommentSuccess:function(t){var o=this;0===parseInt(t.status)?(i.addStat(STAT_CODE.PLACE_COMMENT_ICOMMENT_SUBMITSUCCESS),o.showMessage(t.msg),setTimeout(function(){location.href=o.$form.data("url")},2e3)):o.showMessage(t.msg)},showMessage:function(t,o){n.open({text:t,autoCloseTime:o||2e3})}}});
;define("place:widget/listtool/listtool.js",function(t,e){var i=function(){var e=$(".place-widget-listtool"),i=e.find(".select-btn");i.on("click",function(){var i=i=t("common:widget/stat/stat.js"),o=$(".common-widget-nav .title span").text();!$(this).hasClass("up")&&i.addCookieStat(STAT_CODE.PLACE_LIST_FILTER_CLICK,{wd:o}),$(this).toggleClass("up"),e.toggleClass("hide-extend")})}();e=i});
;define("place:widget/movielist/movielist.js",function(t,i,e){t("common:widget/url/url.js"),t("common:static/js/util.js");var a,o=$("#place-widget-movielist-showall"),n=$(".place-widget-movielist"),c=t("common:widget/stat/stat.js"),l=$(".common-widget-nav .title span").text(),s=function(){o.on("click",m)},d=function(){$pageNav=$(".place-widget-movielist .page-btn"),$.each($pageNav,function(t,i){var e=$(i);e.on("click",function(t){var i=$(t.target),e=i.data("type"),a=i.data("href");c.addCookieStat(STAT_CODE.PLACE_LIST_PAGE_CHANGE,{wd:l,type:e}),i.hasClass("unclick")||(a="http://"+location.host+a,window.location.replace(a))})})},m=function(){var t=$(".place-widget-movielist .place-list"),i=$(".place-widget-movielist .pagenav");o.hide(),t.removeClass("acc-list"),i.show(),c.addStat(STAT_CODE.PLACE_MAINRES_OPEN)},p=function(){n.on("click","li",function(t){var i=$(this),e=i.data("href"),o=i.find(".rl_li_title").text(),n=a&&a.isGenRequest,s=t.target;"a"!==s.tagName.toLowerCase()&&(n=1==n?1:0,c.addCookieStat(STAT_CODE.PLACE_LIST_CLICK,{wd:l,name:o,is_gen:n},function(){location.href="http://"+window.location.host+e}))})},w=function(t){a=t},f=function(){s(),d(),p()},g=function(t){w(t),f()};e.exports.init=g});
;define("place:widget/movienews/movienews.js",function(require,exports,module){function getOrientation(){var e=window.outerWidth>0?window.outerWidth>window.outerHeight?90:0:document.body.offsetWidth>document.body.offsetHeight?90:0;return e}function formatDate(e){return e.getFullYear()+"-"+(e.getMonth()<9?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())}function formateDateText(e,t){var a=["周日","周一","周二","周三","周四","周五","周六"];return e&&e instanceof Date?0==e-t?"今天":864e5==e-t?"明天":a[e.getDay()]:""}function Schedules(e,t){var a={".btn-more":this.showMore,".btn-close":this.showSpecific,".btn-book":this.bookMovie,".calendar_tab li":this.switchTab,".cover-pic":this.showMovieInfo,".movieDes":this.showDesPopup};this.elePlaceMovie=$("div.place-widget-movienews"),this.now=e,this.uid=t;for(var i in a)this.elePlaceMovie.delegate(i,"click",$.proxy(a[i],this))}require("place:static/lib/template.js");var util=require("common:static/js/util.js"),stat=require("common:widget/stat/stat.js"),iScroll=require("common:static/js/iscroll.js"),DETAILTPL=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="cover">    <div id="cover-wrapper" class="cover-wrapper">        <div id="cover-scroller" class="cover-scroller">            ');for(var j=0,len=imgs.length;len>j;j++)_template_fun_array.push('            <img class="cover-pic needsclick" width="69" height="84" data-id="',"undefined"==typeof imgs[j].id?"":baidu.template._encodeHTML(imgs[j].id),'" data-date="',"undefined"==typeof imgs[j].day?"":baidu.template._encodeHTML(imgs[j].day),'" src="http://map.baidu.com/maps/services/thumbnails?width=96&height=128&quality=100&src=',"undefined"==typeof imgs[j].url?"":baidu.template._encodeHTML(imgs[j].url),'" style="display:',"undefined"==typeof imgs[j].visible?"":baidu.template._encodeHTML(imgs[j].visible),'" alt="',"undefined"==typeof imgs[j].title?"":baidu.template._encodeHTML(imgs[j].title),'">            '),imgs[j].newm&&_template_fun_array.push('            <span class="new_icon" style="display:',"undefined"==typeof imgs[j].labelvis?"":baidu.template._encodeHTML(imgs[j].labelvis),'"></span>            '),_template_fun_array.push("            ");_template_fun_array.push('        </div>    </div></div><p class="info-tip"><img src="data:image/jpeg;base64,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" /><br>暂无当日排期...</p><div class="info '),book||_template_fun_array.push("info-unbook"),_template_fun_array.push('">    '),book&&_template_fun_array.push('    <div class="list_opt">        <button id="btnMovieBookMore" class="btn-more">查看更多影讯&nbsp;></button>        <button id="btnMovieBookClose" class="btn-close">收起</button>    </div>    '),_template_fun_array.push("</div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],TABSTPL=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="tab"><div id="tab_wrapper" class="tab_wrapper"><ul class="calendar_tab">    ');for(var i=0,len=days.length;len>i;i++)_template_fun_array.push('    <li data-date="',"undefined"==typeof days[i].date?"":baidu.template._encodeHTML(days[i].date),'" data-text="',"undefined"==typeof days[i].text?"":baidu.template._encodeHTML(days[i].text),'" '),0==i&&_template_fun_array.push('class="current"'),_template_fun_array.push(">","undefined"==typeof days[i].text?"":baidu.template._encodeHTML(days[i].text),"</li>    ");_template_fun_array.push("</ul></div></div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],INFOTPL=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<dl>    <dt><em class="tit">',"undefined"==typeof name?"":baidu.template._encodeHTML(name),"</em> "),parseInt(score)>0&&_template_fun_array.push('<em class="sco"> ',"undefined"==typeof score?"":baidu.template._encodeHTML(score),"</em>"),_template_fun_array.push('<em data-id="',"undefined"==typeof id?"":baidu.template._encodeHTML(id),'" class="movieDes des">影片简介&gt;&gt;</em></dt>    <dd>        ',"undefined"==typeof times?"":baidu.template._encodeHTML(times),"    </dd></dl>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],TIMETPL=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push("<ul>");for(var j=0,len=schedules.length;len>j;j++)_template_fun_array.push('<li><span class="meta"><em class="time">',"undefined"==typeof schedules[j].time?"":baidu.template._encodeHTML(schedules[j].time),"</em>","undefined"==typeof schedules[j].type?"":baidu.template._encodeHTML(schedules[j].type),'</span><span class="meta-extend">'),schedules[j].url&&_template_fun_array.push('<a class="btn-exchange" href="',"undefined"==typeof schedules[j].url?"":baidu.template._encodeHTML(schedules[j].url),'">兑换码</a>'),_template_fun_array.push(""),schedules[j].seatL&&_template_fun_array.push('<a class="btn-book ',"undefined"==typeof schedules[j].style?"":baidu.template._encodeHTML(schedules[j].style),'" data-day="',"undefined"==typeof schedules[j].day?"":baidu.template._encodeHTML(schedules[j].day),'" data-num="',"undefined"==typeof schedules[j].num?"":baidu.template._encodeHTML(schedules[j].num),'" data-cinema="',"undefined"==typeof schedules[j].cinema?"":baidu.template._encodeHTML(schedules[j].cinema),'" data-movie="',"undefined"==typeof schedules[j].movie?"":baidu.template._encodeHTML(schedules[j].movie),'" data-info="',"undefined"==typeof schedules[j].info?"":baidu.template._encodeHTML(schedules[j].info),'" data-orign="',"undefined"==typeof schedules[j].orign?"":baidu.template._encodeHTML(schedules[j].orign),'">选座订票</a>'),_template_fun_array.push("","undefined"==typeof schedules[j].price?"":baidu.template._encodeHTML(schedules[j].price),"</span></li>");_template_fun_array.push("</ul>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],POPUPTPL=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="moviebook-popup-wrapper"><div class="moviebook-popup"><div class="header">',"undefined"==typeof title?"":baidu.template._encodeHTML(title),'院线购票手机验证<a href="javascript:void(0);" id="valid-btn-close" class="btn-close"></a></div><div class="content"><p><label>手机号:&nbsp;</label><input id="valid-phone" autocomplete="false" type="tel"><span class="tip"></span></p><p><label>验证码:&nbsp;</label><input id="valid-number" autocomplete="false" type="text"><img src=""><span class="tip"></span></p><p><button id="valid-btn-submit" class="submit-btn" type="button">提交</button></p></div></div></div>'),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0],DESPOPUPTPL=[function(_template_object){var _template_fun_array=[],fn=function(__data__){var _template_varName="";for(var name in __data__)_template_varName+="var "+name+'=__data__["'+name+'"];';eval(_template_varName),_template_fun_array.push('<div class="moviebook-popup-wrapper"><div class="moviedes_popup"><div class="header">',"undefined"==typeof name?"":baidu.template._encodeHTML(name),""),parseInt(score)>0&&_template_fun_array.push('<span class="sco"> ',"undefined"==typeof score?"":baidu.template._encodeHTML(score),"</span>"),_template_fun_array.push('<a href="javascript:void(0);" id="des-btn-close" class="btn_close"> X </a></div><div class="content" style="text-align:left;"><style>table.des td{vertical-align: top;}</style><table class="des"><tr><td width="45"><span class="name">版本</span>:</td><td><span>',"undefined"==typeof(type||"暂无")?"":baidu.template._encodeHTML(type||"暂无"),'</span></td></tr><tr><td><span class="name">片长</span>:</td><td><span>',"undefined"==typeof(duration||"暂无")?"":baidu.template._encodeHTML(duration||"暂无"),'</span></td></tr><tr><td><span class="name">上映</span>:</td><td><span>',"undefined"==typeof(release||"暂无")?"":baidu.template._encodeHTML(release||"暂无"),'</span></td></tr> <tr><td><span class="name">地区</span>:</td><td><span>',"undefined"==typeof(nation||"暂无")?"":baidu.template._encodeHTML(nation||"暂无"),'</span></td></tr><tr><td><span class="name">导演</span>:</td><td><span>',"undefined"==typeof(director||"暂无")?"":baidu.template._encodeHTML(director||"暂无"),'</span></td></tr><tr><td><span class="name">主演</span>: </td><td><span>',"undefined"==typeof(players||"暂无")?"":baidu.template._encodeHTML(players||"暂无"),'</span></td></tr><tr><td colspan="2"><span class="name">简介</span>: <p style="padding:6px 0 0;">',"undefined"==typeof(des||"暂无")?"":baidu.template._encodeHTML(des||"暂无"),"</p></td></tr></table></div></div></div>"),_template_varName=null}(_template_object);return fn=null,_template_fun_array.join("")}][0];Schedules.prototype.renderFailInfo=function(){this.elePlaceMovie.find(".movienews-loading").text("暂无影讯数据！")},Schedules.prototype.renderMovieNews=function(e){function t(e){var t=[];return $.each(e,function(e,a){var i={url:a.movie_picture||"",id:a.movie_id||"",title:a.movie_name||"",day:"",newm:!1};$.each(r,function(e,t){for(var o=0;o<t.length;){if(a.movie_id==t[o].movie_id){i.day+="d"+e,i.newm=(new Date).getTime()-new Date(a.movie_release_date).getTime()<2592e5;break}o++}}),i.visible=i.day.match(/0/)?"block":"none",i.labelvis="block"==i.visible?"inline-block":"none",t.push(i)}),t}function a(e,t){var a={},i=[],l=[];return $.each(n,function(t,i){i.movie_id==e&&(a=i)}),a&&(a={name:a.movie_name||"",id:a.movie_id||"",duration:a.movie_length&&a.movie_length.toString().replace("分钟","")+"分钟"||"",category:(a.movie_nation?a.movie_nation+"&nbsp;&nbsp;":"")+(a.movie_type||""),director:a.movie_director||"",players:a.movie_starring||"",score:a.movie_score||"",des:a.movie_description||"",pic:a.movie_picture||"",release:a.movie_release_date||""}),$.each(r,function(e,a){a[0].date==t&&(i=a)}),$.isArray(i)?($.each(i,function(e,t){if(a.id==t.movie_id){var i={day:t.date,seatL:!0,time:t.time||"",type:(t.lan||t.src_info[0].lan||"")+"/"+(t.type||t.src_info[0].type||""),price:t.src_info[0].price||t.origin_price||"&nbsp;&nbsp;-",style:t.src_info[0].seq_no?"":"unbook",num:t.src_info[0].seq_no,orign:t.src_info[0].src,cinema:t.src_info[0].cinema_id,theater:t.src_info[0].theater,movie:t.src_info[0].movie_id,name:t.src_info[0].movie_name||a.name,info:"{'lan':'"+t.src_info[0].lan+"','time': '"+t.time+"','price': '"+t.src_info[0].price+"','name': '"+a.name+"'}"};t.src_info[0].aid&&(i.url=o.createCodeUrl(i,a),i.seatL=!1),-1==i.price.toString().indexOf("-")&&(i.price=[" "," "," "].slice(0,3-i.price.toString().length).join("")+"￥"+i.price),l.push(i)}}),a.times=TIMETPL({schedules:l}),a.date=t,a.from=i[0].src_info[0].src,INFOTPL(a).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#92;/g,"\\").replace(/&quot;/g,'"').replace(/&#39;/g,"'")):void 0}function i(e){var t,i=o.eleInfo.length?o.eleInfo:o.elePlaceMovie.find(".info"),n=$("#btnMovieBookClose"),r=o.elePlaceMovie.find(".calendar_tab li.current").attr("data-date"),d="#info_"+e+"_"+r;n.length&&n[0].click(),"block"!=$(d).css("display")&&(0==$(d).length&&(t=a(e,r),$(t).prependTo(i).attr("id",d.substr(1))),i.children().hide().filter(d).attr("style",function(){return l.book&&$(this).find("li").length>7&&(i.find(".list-opt").data("id",d).show(),$("#btnMovieBookMore").show(),$("#btnMovieBookClose").hide()),"display: block"}))}var o=this,n=$.isArray(e.base)&&e.base.length>0?e.base:[],r=$.isArray(e.time_table)&&e.base.length>0?e.time_table:[],l={date:{},imgs:[],book:2==e.webview_style?!1:!0,days:[]};wrapperWidth=0,date=new Date,now=e.now_time||date.getFullYear()+"-"+(date.getMonth()<9?"0"+(date.getMonth()+1):date.getMonth()+1)+"-"+(date.getDate()<10?"0"+date.getDate():date.getDate()),contentTpl="",tabsTpl="",days={},this.orign=r[0][0].src_info[0].src,o.arrMovies=n,o.lastOrientation=lastOrientation=-1,$.each(r,function(e,t){var a=new Date(t[0].date.split("-")[0],parseInt(t[0].date.split("-")[1],10)-1,t[0].date.split("-")[2],"00","00","00"),i=t[0].date.replace(/-/g,".").replace(/^[0-9]*./g,"");days[formatDate(a)]=e,l.days[e]={text:i+" "+formateDateText(a,new Date(now.split("-")[0],parseInt(now.split("-")[1],10)-1,now.split("-")[2],"00","00","00")),date:t[0].date,obj:a}}),this.days=days,l.imgs=t(n),contentTpl=DETAILTPL(l),tbsTpl=TABSTPL(l),o.elePlaceMovie.find(".movienews-content").append(tbsTpl).append(contentTpl).show().removeClass("movienews-empty").next().remove(),o.eleCover=this.elePlaceMovie.find(".cover"),o.eleInfo=o.elePlaceMovie.find(".info"),o.eleInfotip=o.elePlaceMovie.find(".info-tip"),r.length>3&&$(".tab_wrapper").width()<75*r.length+8&&($(".tab_wrapper").addClass("slide").find(".calendar_tab").width(75*r.length+8),o.tabScroll=new iScroll("tab_wrapper",{momentum:!1,hScroll:!0,hScrollbar:!1,vScrollbar:!1,vScroll:!1,lockDirection:!0,handleClick:!1})),o.elePlaceMovie.find(".cover-scroller").css({display:"block"}),o.coverScroll=new iScroll("cover-wrapper",{snap:!0,momentum:!1,hScrollbar:!1,vScrollbar:!1,vScroll:!1,lockDirection:!0,onScrollEnd:function(){var e=o.eleCover.find("img[style='display:block']"),t=e.eq(o.coverScroll.currPageX),a=t.data("id");return 0==e.length?(o.elePlaceMovie.addClass("movienews-empty"),!1):(i(a,o.coverScroll.currPageX),void 0)}}),$("div.cover").find("img[style='display:block']").length?this.updateLayout(0):this.elePlaceMovie.toggleClass("movienews-empty",!0)},Schedules.prototype.updateLayout=function(e){var t=$("div.cover").width(),a=this,i=$(".tab_wrapper"),o=i.find("li").length,n=$("div.cover").find("img[style='display:block']").length,r=69,l=a.lastOrientation;window.orientation=getOrientation(),$("#cover-wrapper").css({overflow:"visible",width:r+10,right:3*t/4-r/2-10}),$("#cover-scroller").css("width",(r+10)*n),this.coverScroll.refresh(),"undefined"!=typeof e&&e>-1&&this.coverScroll.scrollToPage(e,0,0),window.setTimeout(function(){window.orientation=getOrientation(),i.width()<75*o+8?(a.tabScroll||(i.addClass("slide").find(".calendar_tab").width(75*o+8),a.tabScroll=new iScroll("tab_wrapper",{momentum:!1,hScroll:!0,hScrollbar:!1,vScrollbar:!1,vScroll:!1,lockDirection:!0,handleClick:!1})),window.orientation!=l&&a.tabScroll.scrollToPage(i.find(".current").index(),0,0)):a.tabScroll&&(i.removeClass("slide").find(".calendar_tab").width("auto"),a.tabScroll.destroy(),delete a.tabScroll),window.orientation!=l&&(a.lastOrientation=window.orientation)},100)},Schedules.prototype.switchTab=function(e){var t,a=$(e.target),i=[],o=a.index();return a.hasClass("current")?!1:(stat.addStat(STAT_CODE.PLACE_MOVIE_TAB_CLICK,{day:o}),a.addClass("current").siblings().removeClass("current"),this.eleCover&&this.eleCover.length&&(this.eleCover.find("img").each(function(e,t){var a=$(t),n=a.data("date"),r=!0;-1!=n.indexOf("d"+o)?(a.attr("style","display:block"),a.next().hasClass("new_icon")&&a.next().show()):(a.attr("style","display:none"),a.next().hasClass("new_icon")&&a.next().hide(),r=!1),r&&i.push(a)}),t=0==i.length?!0:!1,this.elePlaceMovie.toggleClass("movienews-empty",t),t||this.updateLayout(0)),void 0)},Schedules.prototype.showDesPopup=function(e){var t,a,i,o=$(e.target).attr("data-id"),n=this.arrMovies,r=$(".moviebook-popup-wrapper");$.each(n,function(e,t){t.movie_id==o&&(a=t)}),a.movie_starring&&(t=a.movie_starring.split("/").slice(0,4).join("、")),i=a.movie_description.length>180?a.movie_description.slice(0,180)+"...":a.movie_description,a={name:a.movie_name||"",id:a.movie_id||"",duration:a.movie_length&&a.movie_length.toString().replace("分钟","")+"分钟"||"",nation:a.movie_nation,type:a.movie_type,director:a.movie_director||"",players:t,score:a.movie_score,des:i,release:a.movie_release_date},popupHtml=DESPOPUPTPL(a),$(popupHtml).prependTo("#wrapper").show().children().first().css("top",window.scrollY+$(window).height()/3),$("body").height()<window.screen.height&&r.height(window.screen.height),$("#des-btn-close").click($.proxy(this.closePopup,this))},Schedules.prototype.showMovieInfo=function(e){var t=this,a=$(e.target),i=t.elePlaceMovie.find(".cover"),o=-1;i.find("img[style='display:block']").each(function(e,t){a.data("id")==$(t).data("id")&&(o=e)}),o>-1&&o!=t.coverScroll.currPageX&&(stat.addStat(STAT_CODE.PLACE_MOVIE_PIC_CLICK),window.setTimeout(function(){t.coverScroll.scrollToPage(o,0)},0))},Schedules.prototype.showMore=function(e){var t=$(e.target).parent().data("id"),a=$(t),i=a.find("ul"),o=i.children().length,n=i.height();o>7&&15>o?(i.css("max-height","none"),$("#btnMovieBookMore").hide(),$("#btnMovieBookClose").show()):(n+=386,n>56*o?(i.css("max-height",56*o+"px"),$("#btnMovieBookMore").hide(),$("#btnMovieBookClose").show()):i.css("max-height",n-3+"px"))},Schedules.prototype.showSpecific=function(e){var t=$(e.target).parent().attr("data-id"),a=$(t),i=a.find("ul");i.css("max-height","386px"),$("#btnMovieBookMore").show(),$("#btnMovieBookClose").hide()},Schedules.prototype.bookMovie=function(e){if("A"!=e.target.tagName)return!1;e.preventDefault(),stat.addStat(STAT_CODE.PLACE_MOVIE_BOOK_CLICK,{from:this.orign});var t=$(e.target);if(t.hasClass("unbook"))return!1;var a="/detail?",i={uid:this.uid,date:t.attr("data-day"),seq_no:t.attr("data-num"),cinema_id:t.attr("data-cinema"),movie_id:t.attr("data-movie"),third_from:t.data("orign"),movie_info:t.attr("data-info").replace(/\'/g,'"')},o=a+"qt=movie&act=select&from=webapp&"+$.param(i);return"gewala"==i.third_from||"wanda"==i.third_from?(this.renderValidPopup(o),!1):(window.location.href=o,void 0)},Schedules.prototype.renderValidPopup=function(e){var t=$(".moviebook-popup-wrapper"),a={wanda:"万达",gewala:"格瓦拉"},i={title:a[this.orign]},o=POPUPTPL(i),n=localStorage.getItem("movie_book_user_mobile");t.length||(t=$(o),t.prependTo("#wrapper").show().data("url",e).children().first().css("top",window.scrollY+$(window).height()/2),$("body").height()<window.screen.height&&t.height(window.screen.height),n&&$("#valid-phone").val(n),$("#valid-btn-close").click($.proxy(this.closePopup,this)),$("#valid-btn-submit").click($.proxy(this.validPhone,this)))},Schedules.prototype.closePopup=function(){var e=$(".moviebook-popup-wrapper");e.length&&e.remove()},Schedules.prototype.validPhone=function(){function e(){var e="mkcode",t=document.createElement("script"),a=function(){$(t).remove(),delete window[e]};window[e]=function(e){a(),e.content&&e.content.vcode&&n.data("vcode",e.content.vcode).find("p").eq(1).show().find("img").attr("src","http://map.baidu.com/maps/services/captcha/image?vcode="+e.content.vcode)},t.src="http://map.baidu.com/maps/services/captcha?setno=1&cb="+e+"&t="+(1e8*Math.random()).toFixed(0),$("head").append(t)}function t(t,a){var o="vdcode",r=document.createElement("script"),l=function(){$(r).remove(),delete window[o]};t.t=(1e8*Math.random()).toFixed(0),window[o]=function(t){return l(),t.result&&0!=t.result.error?(i.val(""),n.find(".tip").eq(1).show().text("验证出错，请重新输入验证码！"),e(),void 0):($.isFunction(a)&&a(),void 0)},r.src="http://map.baidu.com/maps/services/captcha/verify?cb="+o+"&"+$.param(t),r.setAttribute("async","false"),$("head").append(r)}var a=($(event.target),$("#valid-phone")),i=$("#valid-number"),o=a.next(),n=$(".moviebook-popup-wrapper"),r=a.val(),l=localStorage.getItem("movie_book_user_mobile");if(!r||11!=r.length||!r.match(/^((\(\d{3}\))|(\d{3}\-))?13[0-9]\d{8}|15[0-9]\d{8}|18\d{9}/g))return o.html("请确保输入号码正确！").show(),!1;if(n.data("valid"))return o.hide(),t({code:i.val(),vcode:n.data("vcode")},function(){r=a.val();try{localStorage.setItem("movie_book_user_mobile",r)}catch(e){}window.setTimeout(function(){window.location.href=n.data("url")+"&user_mobile="+r},200)}),!1;if(!l||l&&r!=l)return o.hide(),n.data("valid",!0),e(),!1;try{localStorage.setItem("movie_book_user_mobile",r)}catch(d){}window.location.href=n.data("url")+"&user_mobile="+r},Schedules.prototype.createCodeUrl=function(e,t){var a=util.urlToJSON(window.location.href),i="",o={qt:"mcdkey",act:"verify",uid:this.uid,code:a.code,sign:a.sign,name:t.name,mid:e.movie,duration:t.duration,score:t.score,info:e.info.replace(/\'/g,'"'),day:e.day,seq_no:e.num,cinemaid:e.cinema,time:e.time,type:e.type,pname:$("#place-widget-captain-name").html()||"",release:t.release,category:t.category,director:t.director,player:t.player,pic:t.pic};return a.code&&a.sign&&(i="/detail?"+util.jsonToUrl(o)),i},module.exports={init:function(e,t,a){stat.addStat(STAT_CODE.PLACE_MOVIE_PV,{state:t});var i=util.urlToJSON(window.location.href),o={qt:"timetable",act:"timetable",uid:e,style:t,code:i.code||"",sign:i.sign||""};$.ajax({url:"/detail?",data:o,dataType:"json",success:function(i){var o=new Schedules(i.now_time||a,e);window.addEventListener("resize",function(){o.updateLayout()},!1),2==t&&(i=i.other_info),i.time_table&&i.time_table.length?o.renderMovieNews(i):o.renderFailInfo()}})}}});
;define("place:widget/placelist/placelist.js",function(t,a,e){function i(){"use strict";S.on("click",o),u.on("click","li",s),E.on("click",c),u.on("click",".mod_tel_content",l),n()}function o(t){"use strict";var a=$(t.target).closest("li"),e=find(".rl_li_title").text(),i=a.attr("srcname");g.addCookieStat(STAT_CODE.PLACE_SCOPE_LIST_BOOK_CLICK,{wd:w,name:e,srcname:i,entry:_})}function n(){"use strict";var t=$(".place-widget-placelist .page-btn");$.each(t,function(t,a){var e=$(a);e.on("click",function(t){var a=$(t.target),e=a.data("type"),i=a.data("href");g.addCookieStat(STAT_CODE.PLACE_LIST_PAGE_CHANGE,{wd:w,type:e}),a.hasClass("unclick")||(i="http://"+location.host+i,window.location.replace(i)),t.stopPropagation(),t.stopImmediatePropagation()})})}function c(t){"use strict";var a=$(".place-widget-placelist .place-list"),e=$(".place-widget-placelist .pagenav");E.hide(),a.removeClass("acc-list"),e.show(),g.addStat(STAT_CODE.PLACE_MAINRES_OPEN),t.stopPropagation(),t.stopImmediatePropagation()}function s(t){"use strict";var a=$(this),e=a.data("href"),i=a.find(".rl_li_title").text(),o=p&&p.isGenRequest,n=t.target,c=a.attr("srcname");"a"!==n.tagName.toLowerCase()&&(o=1==o?1:0,g.addCookieStat(STAT_CODE.PLACE_LIST_CLICK,{wd:w,name:i,is_gen:o,srcname:c,entry:_},function(){location.href="http://"+window.location.host+e}),t.stopPropagation(),t.stopImmediatePropagation())}function l(t){"use strict";var a=$(this).find("a"),e=a.data("tel"),i=$(".common-widget-nav .title span").text(),o=$(t.target).closest("li"),n=o.find(".rl_li_title").text(),c=o.attr("srcname");m.isAndroid()?(a.attr("href","javascript:void(0)"),m.TelBox.showTb(e)):window.location.href="tel:"+e,g.addStat(STAT_CODE.PLACE_LIST_TELEPHONE_CLICK,{wd:i,name:n,srcname:c,entry:_}),t.stopPropagation(),t.stopImmediatePropagation()}function r(){"use strict";var t,a=/searchFlag=([A-Za-z]+)/g;(t=a.exec(location.href))&&(_=t[1])}function d(t){"use strict";p=t}var p,_,m=(t("common:widget/url/url.js"),t("common:static/js/util.js")),g=t("common:widget/stat/stat.js"),C=t("common:widget/geolocation/location.js"),E=$("#place-widget-placelist-showall"),u=$(".place-widget-placelist"),w=$(".common-widget-nav .title span").text(),S=$('.btn-book[industry="scope"]');e.exports={init:function(t){d(t),i(),r();var a=$(".common-widget-nav .title span").text();g.addStat(STAT_CODE.PLACE_LIST_VIEW,{wd:a}),C.hasExactPoi()?g.addStat(STAT_CODE.PLACE_LIST_GEO_SUC):g.addStat(STAT_CODE.PLACE_LIST_GEO_FAIL)}}});
;define("place:widget/premium/premium.js",function(e,i,a){function s(e){var i=d.html()-0;o.hasClass("place-widget-premium-disable")&&o.removeClass("place-widget-premium-disable"),m.hasClass("place-widget-premium-disable")||(o.on("click",t),c.hide(),c.eq(i-2).show(),d.html(i-1),0==i-2&&(m.addClass("place-widget-premium-disable"),m.off("click",s))),e.stopPropagation(),e.stopImmediatePropagation()}function t(e){var i=d.html()-0,a=p.html()-0;m.hasClass("place-widget-premium-disable")&&m.removeClass("place-widget-premium-disable"),o.hasClass("place-widget-premium-disable")||(m.on("click",s),c.hide(),c.eq(i).show(),d.html(i+1),i+1==a&&(o.addClass("place-widget-premium-disable"),o.off("click",t))),e.stopPropagation(),e.stopImmediatePropagation()}var n,c=$(".premium-list > li"),m=$(".place-widget-premium-pagenum-prev"),o=$(".place-widget-premium-pagenum-next"),d=$(".place-widget-premium-curpage"),p=$(".place-widget-premium-totalpage"),l=e("common:widget/stat/stat.js"),r=e("common:static/js/util.js");e("common:widget/cookie/cookie.js");var u,g,f=function(){function e(){var e=$("#msg-tel").val();return isNaN(e)||11!==e.length||!e.match(/^((\(\d{3}\))|(\d{3}\-))?13[0-9]\d{8}|15[89]\d{8}|18\d{9}/g)?(o.addClass("tip-active"),setTimeout(function(){o.removeClass("tip-active")},1e3),void 0):(h.send({en_name:c,poi_id:u,promo_id:n,mobile:e},s),a({type:"sendIng"}),void 0)}function i(){v.hidePopup()}function a(e){e=e||{};var i={noNetWork:"请检查网络，稍后重试",sendIng:"正在发送...",success:"发送成功",fail:"发送失败"},a=e.message||i[e.type]||i.fail,s=m.find(".msg-form");$msgNotice=m.find(".msg-notice"),s.hide(),$msgNotice.show().html(a)}function s(e){var i=e.errorNo;0===i?a({type:"success"}):a({message:e.errMsg}),setTimeout(function(){v.hidePopup()},2e3)}function t(){g||(v.creatPopup(),m=$("div.msg-container"),o=m.find(".tip"),$("#msg-send-btn").on("click",e),$("#msg-cancel-btn").on("click",i))}var n,c,m,o;return{show:function(e,i){n=e||"",c=i||"",t(),g.show().find("input").focus()}}}(),v={creatPopup:function(){var e='<div class="place-msg-mask">            <div class="msg-container">                <div class="msg-form">                    <p>请输入手机号</p>                    <p>                        <input type="tel" id="msg-tel"/>                        <span class="tip">请输入正确手机号</span>                    </p>                    <p class="opt">                        <a href="javascript:void(0);" id="msg-send-btn" class="msg-send-btn">发送</a>                        <a href="javascript:void(0);" id="msg-cancel-btn" class="msg-cancel-btn">取消</a>                    </p>                </div>                <div class="msg-notice"></div>            </div>        </div>';g=$(e).appendTo("#wrapper")},hidePopup:function(){g&&g.hide()}},h={send:function(e,i){e=$.extend({qt:"sms",en_name:"",poi_id:"",promo_id:"",mobile:"",src:"map",terminal:"webapp",imei:2e14},e),$.ajax({url:"http://client.map.baidu.com/detail",data:e,success:i,dataType:"jsonp"})}};r.urlToJSON(location.href).uid,$("#place-premium-msg-btn").click(function(){var e=$(this),i=e.data("saleid"),a=e.data("enname");window.scrollTo(0,$("#product-nav").height()),f.show(i,a),l.addStat(STAT_CODE.PLACE_PREMIUM_SMSG_DL_CLICK,{wd:n.wd,name:n.name,srcname:n.srcname})}),a.exports={init:function(e,i){u=e,n=i||{};var a=p.html()-0;a>1&&(m.on("click",s),o.on("click",t)),l.addStat(STAT_CODE.PLACE_PREMIUM_VIEW,{wd:n.wd,name:n.name,srcname:n.srcname})}}});
;define("place:widget/recommend/recommend.js",function(t,e,i){function a(){"use strict";o.on("click",n)}function n(t){"use strict";var e,i,a,n=$(t.target).closest("li"),o=location.href,s=n.attr("data-uid"),r=$(".place-widget-captain .name").text(),d=(n.find("p").eq(0).text().substr(2),o.lastIndexOf("/"));i=o.slice(0,d).replace(/qt=[A-Za-z]*/g,"qt=inf"),a=o.slice(d),e=i+"&uid="+s+a,c.addCookieStat(STAT_CODE.PLACE_CATER_DETAIL_RECOMMEND_CLICK,{name:r},function(){location.href=e}),t.stopPropagation(),t.stopImmediatePropagation()}var o=$(".place-widget-recommend ul li"),c=t("common:widget/stat/stat.js");i.exports={init:function(){"use strict";a()}}});
;define("place:widget/scopebook/scopebook.js",function(o,t,s){function e(){"use strict";n.on("click",a)}function a(o){var t=$(o.target).closest("div"),s=t.find("span").eq(0),e=t.next();s.hasClass("scope-arrow-icon-down")||(n.next().addClass("scope-book-hide"),n.find(".scope-arrow-icon").removeClass("scope-arrow-icon-down"),t.attr("last")?t.addClass("scope-border-bottom"):(n.last().addClass("scope-border-bottom-radius"),n.last().attr("style","border-bottom: none"))),s.toggleClass("scope-arrow-icon-down"),0==e.length?null:e.toggleClass("scope-book-hide"),t.attr("last")&&(t.attr("style",""),t.toggleClass("scope-border-bottom-radius"),"scope-border-bottom"!=t.attr("class")&&t.attr("style","border-bottom: none")),r(c),o.stopPropagation(),o.stopImmediatePropagation()}function r(o){var t=o.offset();window.scrollTo(0,t.top)}var n=$(".scope-ticket-name").parent(),c=$(".place-widget-scope-book");o("common:widget/stat/stat.js"),s.exports={init:function(){"use strict";e()}}});
;define("place:widget/selectbox/selectbox.js",function(e,t,a){var r,_,s,o=e("common:widget/url/url.js"),n=e("common:widget/geolocation/location.js"),c=e("common:static/js/util.js"),l=e("common:widget/stat/stat.js"),i=$(".place-widget-selectbox select"),p=($(".place-widget-selectbox select"),{takeout:{pl_dist:"radius",pl_sort_type:"sortType",pl_sort_rule:"orderType",pn:"pageNum"}});a.exports.init=function(e){var t,a;(s=e||{})&&(t=s.wd)&&(a=s.srcname),d(),r=s.select_type,_=s.what,l.addStat(STAT_CODE.PLACE_LIST_FILTER_VIEW,{wd:t,srcname:a})};var d=function(){i.length,$.each(i,function(e,t){$(t).on("change",u)}),$(".city-select").on("click",m)},u=function(e){var t=e.target,a=$(t).closest("select").attr("name"),r=$(t)[0].selectedIndex,_=$($(t)[0][r]),o=_.text(),n=s.wd,c=s.srcname;switch(a){case"pl_dist":l.addCookieStat(STAT_CODE.PLACE_LIST_FILTER_RANGE_CLICK,{wd:n,range:o,srcname:c});break;case"pl_sort_type":l.addCookieStat(STAT_CODE.PLACE_LIST_FILTER_SORT_CLICK,{wd:n,sort:o,srcname:c});break;case"pl_sub_type":l.addCookieStat(STAT_CODE.PLACE_LIST_FILTER_CATEGORY_CLICK,{wd:n,type:o,srcname:c})}C(t),y()},C=function(e){var t=$(e),a=t[0].selectedIndex,r=$(t[0][a]),_=r.text(),s=t.parent().children(".select_title");s.html(_)},y=function(){var e=o.get().query,t=g(),a=n.getCityCode();t=$.extend(t,{pn:0}),e=$.extend(e,t,{c:a}),"takeout"===r&&(e=T(e,r)),e.pl_tonight_sale_flag_section&&delete e.pl_tonight_sale_flag_section,"全市"==e.pl_dist?delete e.center_rank:e.nb_x&&e.nb_y&&(e.center_rank=1),e.pl_movie_book_section="movie_book"==e.pl_sort_type?"1,1":"0,+",o.update({query:e,pageState:{show_select:1}},{queryReplace:!0,replace:!0})},g=function(){var e,t,a={};return $.each(i,function(r,_){var s={},o=$(_);switch(o.parent("select-box"),e=$(_).attr("name"),t=$(_).val(),e){case"pl_sub_type":s.wd=t,s.pl_sub_type=t;break;case"pl_sort_type":s.pl_sort_type=t.split("__")[0],s.pl_sort_rule=t.split("__")[1]||0;break;case"pl_dist":s.pl_dist=t}a=$.extend(a,s)}),a},T=function(e,t){if(e&&t){var a=$.extend({},e),r=p[t];return $.each(r,function(e,t){var r=a[e];r&&(a[t]=r),"pl_sort_rule"!==e&&"0"==r&&delete a[t],delete a[e]}),a}},m=function(){var e=n.getCityType(),t=n.getCityCode(),a=o.get(),r=a.query||{},i=(a.pageState||{},s.wd),p=s.srcname;r.wd=_||r.wd,3===e&&(t=n.getUpCityCode()||t),refer_query=c.jsonToUrl(a.query||{}),refer_pagestate=c.jsonToUrl(a.pageState||{}),l.addCookieStat(STAT_CODE.PLACE_SELECT_CLICK_CITY,{wd:i,srcname:p}),o.update({module:"index",action:"setmylocation",query:{c:t},pageState:{refer_query:refer_query,refer_pagestate:refer_pagestate,list_type:"business_area"}},{queryReplace:!0,pageStateReplace:!0})}});
;define("place:widget/selectlist/selectlist.js",function(e,t,n){var i=e("common:widget/geolocation/location.js"),o=e("common:widget/url/url.js"),a=e("common:static/js/util.js"),c=e("common:widget/setcity/setcity.js"),r="_refer_query",d="_refer_pagestate";n.exports.init=function(e){p(e),s()};var l,u="http://"+location.host+"/mobile/webapp/index/index",y="     ",p=function(e){l=e},s=function(){$list=$(".place-widget-selectlist"),$list.on("click","li",m)},m=function(){var e=$(this),t=+e.data("i")-1;g(t)},g=function(e){if("undefined"!=typeof e){var t=l.list[e],n=o.get(),i=n.pageState,a=_(t),u=i.refer_pagestate||window.localStorage.getItem(d),y=i.refer_query||window.localStorage.getItem(r);y&&"undefined"!=y?(w(a,!1),f(t,{referQuery:y,referPageState:u})):(w(a),a.isExactPoi||3===a.addr.cityType?v():c.setAndRedirect(a.addr.city,a.addr.cityCode))}},f=function(e,t){var n,i,c=o.get(),u=t||{},p=(c.pageState||{},a.urlToJSON(u.referQuery)||{}),s=a.urlToJSON(u.referPageState)||{},m="wm"===p.qt||"takeout"===s.search,g=l.city;window.localStorage.removeItem(r),window.localStorage.removeItem(d),p.wd&&p.wd.split(y)[1]&&(p.wd=p.wd.split(y)[1]),p.c=g.code,i=S(),n=m?b(e,p):h(e,p),s=$.extend(s,{center_name:e.name||""}),delete s.i,o.update({module:n.module,action:n.action,query:n.query,pageState:s},{queryReplace:!0,pageStateReplace:!0})},_=function(e){if(e){S(),l.city;var t,n=a.geoToPoint(e.geo),i=x(e);return t={addr:i,isExactPoi:i.isExactPoi,point:{x:n.lng,y:n.lat}}}},w=function(e){e&&(e.isSaveLocInCookie=!0,i.setAddress(e))},x=function(e){var t,n,i=l.city;cityName=i.name,e.cname?(name=e.pcname?e.pcname+e.cname:e.cname,n=!1):(name=e.name,n=!0);var o=null;return 3===e.city_type&&(o=i.up_cityid),t={address:name,city:cityName,cityCode:e.code?e.code:i.code,isExactPoi:n,cityType:e.city_type?e.city_type:i.type,upCityCode:e.pccode?e.pccode:o}},S=function(){return l.type},v=function(){window.location.href=u},b=function(e,t){var n,i=S();return 2!=i?(n=a.geoToPoint(e.geo),t.pointX1=n.lng,t.pointY1=n.lat,t.nb_x=n.lng,t.nb_y=n.lat,t.center_rank=1,t.m="searchXY"):(t.m="searchBrands",delete t.pointX1,delete t.pointY1,delete t.center_rank,delete t.nb_x,delete t.nb_y),t=$.extend(t,{cityId:e.addr.cityCode,directId:e.addr.cityCode,pageNum:1,pageSize:10}),{query:t,module:"place",action:"takeout"}},h=function(e,t){var n,i=S();return 2!=i?(n=a.geoToPoint(e.geo),t.nb_x=n.lng,t.nb_y=n.lat,t.center_rank=1):(delete t.nb_x,delete t.nb_y,delete t.center_rank,delete t.pointX1,delete t.pointY1),t=$.extend(t,{c:e.addr.cityCode,center_rank:1,pn:0}),{query:t,module:"search",action:"search"}}});
;define("place:widget/takeoutdetailnav/takeoutdetailnav.js",function(){$(".place-widget-takeout-detail").on("click",function(){$("#place-widget-dish-category").hide()}),$(".meau-btn").click(function(){$("#place-widget-dish-category .dish-name").length>0&&$("#place-widget-dish-category").toggle()})});
;define("place:widget/takeoutlist/takeoutlist.js",function(t,a,e){e.exports.bind=function(){$pageNav=$(".place-widget-taskoutlist .page_btn"),$.each($pageNav,function(t,a){var e=$(a);e.on("click",function(t){var a=$(t.target),e=(a.data("type"),a.data("href"));a.hasClass("unclick")||(e="http://"+location.host+e,window.location.replace(e))})})}});
;define("place:widget/telephone/telephone.js",function(t,e,a){"use strict";function n(){r.on("click",o)}function o(t){var e,a,n,o=$(t.target).closest("a"),r=/searchFlag=([A-Za-z]+)/g;(e=r.exec(location.href))&&(a=e[1]),n={wd:i.wd,name:i.name,srcname:i.srcname,entry:a},c.addStat(STAT_CODE.PLACE_DETAIL_TELEPHONE_CLICK,n),s.isAndroid()&&(o.attr("href","javascript:void(0)"),s.TelBox.showTb(o.attr("data-tel"))),t.stopPropagation(),t.stopImmediatePropagation()}var i,s=t("common:static/js/util.js"),c=t("common:widget/stat/stat.js"),r=$(".place-widget-telephone");a.exports={init:function(t){n(),i=t||{},c.addStat(STAT_CODE.PLACE_DETAIL_TELEPHONE_SHOW,{wd:i.wd,name:i.name,srcname:i.srcname})}}});
;define("place:widget/thirdcomment/thirdcomment.js",function(t,e,o){var n=t("common:static/js/util.js");o.exports={init:function(){$("#J_commentSelect")&&$("#J_commentSelect").on("change",this.loadMore)},loadMore:function(){var t=$(this),e=n.jsonToUrl({uid:t.data("uid"),startIndex:0,maxResults:5,orderBy:t.val()});BigPipe.asyncLoad({id:"place-pagelet-bdcomment"},e)}}});
;define("place:widget/thirdsrcota/thirdsrcota.js",function(e,t,o){"use strict";function a(){s=$(".place-widget-thirdsrcota"),c=s.find(".bookbtn-xiecheng-normal"),l=s.find(".uid").val(),c.length>0&&s.removeClass("hidelist"),f.subscribe(h.DATEPICKER_DATE_CHANGE,i),f.broadcast(h.HOTELBOOK_OR_THIRDSRCOTA_SHOW),s.delegate(".room-more","click",function(){d=s.find(".more-items"),r=s.find(".room-more-icon"),n=s.find(".room-more-text"),r.hasClass("arrow-down")?(r.removeClass("arrow-down"),n.text("查看全部房型"),d.hide()):(r.addClass("arrow-down"),n.text("收起其它房型"),d.show())}),s.delegate(".hb-hd","click",function(e){$(e.target).hasClass("xiecheng-sales")||s.toggleClass("hidelist")}),s.delegate(".bookbtn-item","click",function(e){var t,o=$(e.target),a=(new Date).format("yyyy-MM-dd"),i=new Date((new Date).getTime()+864e5).format("yyyy-MM-dd"),s=o.data("url"),d=parseInt(o.data("price"),10),r=parseInt(o.data("bonus"),10)||0;t={from_page:b,checkin_date:m||a,checkout_date:g||i,c:p.getCityCode(),price:d,book_price:d-r,simple:1},window.location.href="/mobile/webapp/place/order/"+s+"&"+w.jsonToQuery(t)})}function i(e){(e.sd!==m||e.ed!==g)&&(m=e.sd,g=e.ed,BigPipe.asyncLoad({id:"place-pagelet-thirdsrcota"},w.jsonToUrl({st:e.sd,et:e.ed,uid:l})))}var s,d,r,n,c,l,m,g,f=e("common:widget/broadcaster/broadcaster.js"),h=e("place:static/js/broadcastname.js"),p=e("common:widget/geolocation/location.js"),w=e("common:static/js/util.js"),u=e("common:widget/stat/stat.js"),b=_APP_HASH.action;o.exports={init:function(){a(),u.addStat(STAT_CODE.PLACE_XIECHENG_PV,{from_page:b})}}});
;define("place:widget/toplist/toplist.js",function(t,e,a){function i(){"use strict";c.on("click",o),p.on("click",s)}function o(t){"use strict";l.toggleClass("place-widget-toplist-arrowup"),p.toggleClass("place-widget-toplist-showall"),t.stopPropagation(),t.stopImmediatePropagation()}function s(t){"use strict";var e,a,i,o=$(t.target).closest("li"),s=location.href,c=o.attr("data-uid"),l=o.find("p").eq(0).text(),p=s.lastIndexOf("/"),g={wd:d,name_src:n.name,name_dest:l,srcname:n.srcname};a=s.slice(0,p).replace(/qt=[A-Za-z]*/g,"qt=inf"),i=s.slice(p),e=a+"&uid="+c+i,r.addCookieStat(STAT_CODE.PLACE_DETAIL_RANK_CLICK,g,function(){location.href=e}),t.stopPropagation(),t.stopImmediatePropagation()}var n,c=$(".place-widget-toplist"),l=$(".place-widget-toplist-arrow"),p=$(".place-widget-toplist-others"),r=t("common:widget/stat/stat.js"),d=$(".common-widget-nav .title span").text();a.exports={init:function(t){"use strict";i(),n=t||{},r.addStat(STAT_CODE.PLACE_DETAIL_RANK_VIEW,{wd:d,name:n.name,srcname:n.srcname})}}});
;define("place:widget/tosearch/tosearch.js",function(t,e,i){i.exports={init:function(){"use strict";var t=$(".place-widget-tosearch .name");t.css("max-width",$("body").offset().width-200+"px"),$(window).on("resize",function(){t.css("max-width",$("body").offset().width-200+"px")})}}});