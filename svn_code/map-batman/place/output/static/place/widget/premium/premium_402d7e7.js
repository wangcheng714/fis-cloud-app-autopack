define("place:widget/premium/premium.js",function(e,i,a){function s(e){var i=d.html()-0;o.hasClass("place-widget-premium-disable")&&o.removeClass("place-widget-premium-disable"),m.hasClass("place-widget-premium-disable")||(o.on("click",t),c.hide(),c.eq(i-2).show(),d.html(i-1),0==i-2&&(m.addClass("place-widget-premium-disable"),m.off("click",s))),e.stopPropagation(),e.stopImmediatePropagation()}function t(e){var i=d.html()-0,a=p.html()-0;m.hasClass("place-widget-premium-disable")&&m.removeClass("place-widget-premium-disable"),o.hasClass("place-widget-premium-disable")||(m.on("click",s),c.hide(),c.eq(i).show(),d.html(i+1),i+1==a&&(o.addClass("place-widget-premium-disable"),o.off("click",t))),e.stopPropagation(),e.stopImmediatePropagation()}var n,c=$(".premium-list > li"),m=$(".place-widget-premium-pagenum-prev"),o=$(".place-widget-premium-pagenum-next"),d=$(".place-widget-premium-curpage"),p=$(".place-widget-premium-totalpage"),l=e("common:widget/stat/stat.js"),r=e("common:static/js/util.js");e("common:widget/cookie/cookie.js");var u,g,f=function(){function e(){var e=$("#msg-tel").val();return isNaN(e)||11!==e.length||!e.match(/^((\(\d{3}\))|(\d{3}\-))?13[0-9]\d{8}|15[89]\d{8}|18\d{9}/g)?(o.addClass("tip-active"),setTimeout(function(){o.removeClass("tip-active")},1e3),void 0):(h.send({en_name:c,poi_id:u,promo_id:n,mobile:e},s),a({type:"sendIng"}),void 0)}function i(){v.hidePopup()}function a(e){e=e||{};var i={noNetWork:"请检查网络，稍后重试",sendIng:"正在发送...",success:"发送成功",fail:"发送失败"},a=e.message||i[e.type]||i.fail,s=m.find(".msg-form");$msgNotice=m.find(".msg-notice"),s.hide(),$msgNotice.show().html(a)}function s(e){var i=e.errorNo;0===i?a({type:"success"}):a({message:e.errMsg}),setTimeout(function(){v.hidePopup()},2e3)}function t(){g||(v.creatPopup(),m=$("div.msg-container"),o=m.find(".tip"),$("#msg-send-btn").on("click",e),$("#msg-cancel-btn").on("click",i))}var n,c,m,o;return{show:function(e,i){n=e||"",c=i||"",t(),g.show().find("input").focus()}}}(),v={creatPopup:function(){var e='<div class="place-msg-mask">            <div class="msg-container">                <div class="msg-form">                    <p>请输入手机号</p>                    <p>                        <input type="tel" id="msg-tel"/>                        <span class="tip">请输入正确手机号</span>                    </p>                    <p class="opt">                        <a href="javascript:void(0);" id="msg-send-btn" class="msg-send-btn">发送</a>                        <a href="javascript:void(0);" id="msg-cancel-btn" class="msg-cancel-btn">取消</a>                    </p>                </div>                <div class="msg-notice"></div>            </div>        </div>';g=$(e).appendTo("#wrapper")},hidePopup:function(){g&&g.hide()}},h={send:function(e,i){e=$.extend({qt:"sms",en_name:"",poi_id:"",promo_id:"",mobile:"",src:"map",terminal:"webapp",imei:2e14},e),$.ajax({url:"http://client.map.baidu.com/detail",data:e,success:i,dataType:"jsonp"})}};r.urlToJSON(location.href).uid,$("#place-premium-msg-btn").click(function(){var e=$(this),i=e.data("saleid"),a=e.data("enname");window.scrollTo(0,$("#product-nav").height()),f.show(i,a),l.addStat(STAT_CODE.PLACE_PREMIUM_SMSG_DL_CLICK,{wd:n.wd,name:n.name,srcname:n.srcname})}),a.exports={init:function(e,i){u=e,n=i||{};var a=p.html()-0;a>1&&(m.on("click",s),o.on("click",t)),l.addStat(STAT_CODE.PLACE_PREMIUM_VIEW,{wd:n.wd,name:n.name,srcname:n.srcname})}}});