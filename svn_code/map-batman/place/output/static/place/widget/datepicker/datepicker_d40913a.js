define("place:widget/datepicker/datepicker.js",function(e){"use strict";function t(){var t=(e("common:widget/datepicker/datepicker.js"),new Date),k=new Date(t.getTime()+864e5);r=g.find(".sd"),c=g.find(".ed"),s=g.find(".sd-wrapper"),n=g.find(".ed-wrapper"),o=g.find(".sd-picker"),p=g.find(".ed-picker"),r.text(t.format("yyyy-MM-dd")),c.text(k.format("yyyy-MM-dd")),o.datepicker({date:t,minDate:t,valuecommit:function(e,t,a){var s,n;r.text(a),s=$.datepicker.parseDate(c.text()),i(t,s)>=0&&(n=new Date(t.getTime()+864e5),c.text(n.format("yyyy-MM-dd")),p.datepicker("date",n)),p.datepicker("minDate",new Date(t.getTime()+864e5)).datepicker("refresh"),d("start"),m.broadcast(f.DATEPICKER_DATE_CHANGE,{sd:r.text(),ed:c.text()})}}),p.datepicker({date:k,minDate:k,valuecommit:function(e,t,a){var s,n;c.text(a),s=$.datepicker.parseDate(r.text()),i(t,s)<=0&&(n=new Date(t.getTime()-864e5),r.text(n.format("yyyy-MM-dd")),o.datepicker("date",n).datepicker("refresh")),d("end"),m.broadcast(f.DATEPICKER_DATE_CHANGE,{sd:r.text(),ed:c.text()})}}),r.on("click",a),c.on("click",a),g.show()}function a(e){var t=e.currentTarget.className;"sd"===t?(d("end"),s.toggle(),r.parents(".date").toggleClass("active")):(d("start"),n.toggle(),c.parents(".date").toggleClass("active")),e.stopPropagation(),e.stopImmediatePropagation()}function d(e){switch(e){case"start":s.hide(),r.parents(".date").removeClass("active");break;case"end":n.hide(),c.parents(".date").removeClass("active")}}function i(e,t){return e.getTime()-t.getTime()}var r,c,s,n,o,p,m=e("common:widget/broadcaster/broadcaster.js"),f=e("place:static/js/broadcastname.js"),g=$(".place-widget-datepicker");m.subscribe(f.HOTELBOOK_OR_THIRDSRCOTA_SHOW,function(){"none"===g.css("display")&&t()})});